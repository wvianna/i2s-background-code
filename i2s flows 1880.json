[{"id":"b78441eb.815e5","type":"tab","label":"GeracaoRendimento","disabled":false,"info":""},{"id":"a3e5e6e7.f44978","type":"tab","label":"TratamentoRendimento","disabled":false,"info":""},{"id":"9d6a8aef.4d42c8","type":"tab","label":"Economia","disabled":false,"info":""},{"id":"157208c6.81a43f","type":"tab","label":"Conectividade","disabled":false,"info":""},{"id":"b5fc5ce6.34461","type":"tab","label":"CalculoDiaVazaoTotalEneltec","disabled":false,"info":""},{"id":"14572cfb.10d313","type":"tab","label":"CalculoMesVazaoTotalEneltec","disabled":false,"info":""},{"id":"bcc9ccbb.41377","type":"tab","label":"CalculoAnoVazaoTotalEneltec","disabled":false,"info":""},{"id":"9c48a530.854d18","type":"tab","label":"CalculoMesTotalEnergiaFronius","disabled":false,"info":""},{"id":"b17b4e3a.148a","type":"tab","label":"CalculoAnoTotalEnergiaGinlong","disabled":false,"info":""},{"id":"f544a59b.bd6c18","type":"tab","label":"SomatóriosConsumoMedidoresEnergia","disabled":false,"info":""},{"id":"f94531da.85b0b","type":"tab","label":"SomatórioMedidoresConsumoÁgua","disabled":false,"info":""},{"id":"7dfc8eaa.d8405","type":"subflow","name":"Subflow 1","info":"","in":[],"out":[]},{"id":"e01ff31a.ec00c8","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"3000","reconnectTimeout":"5000"},{"id":"7d706e5.8c6dd1","type":"ui_group","z":"","name":"CUSTOS","tab":"b7559e8f.6e4e6","disp":true,"width":"16","collapse":true},{"id":"b7559e8f.6e4e6","type":"ui_tab","z":"","name":"HOME","icon":"dashboard","disabled":false,"hidden":false},{"id":"49cc87ae.a3fe7","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"PARAMETRIZAÇÃO I2S","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"3af853c.716cb2c","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"},{"id":"75c191d4.487508","type":"modbus-read","z":"b78441eb.815e5","name":"jit201TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"6","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":172.5,"y":113,"wires":[["cf08c53f.ae123"],[]]},{"id":"cf08c53f.ae123","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":415.5,"y":108,"wires":[["404dd201.fd0d74"]]},{"id":"4deb5e0a.8218e","type":"modbus-read","z":"b78441eb.815e5","name":"jit202TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"16","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":175,"y":182,"wires":[["86e7b5db.6b32c8"],[]]},{"id":"ea2ea795.e96ba","type":"modbus-read","z":"b78441eb.815e5","name":"jit203TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"26","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":172,"y":245,"wires":[["49d4252.085d7dc"],[]]},{"id":"ab003c80.22fe9","type":"modbus-read","z":"b78441eb.815e5","name":"jit204TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"36","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":175,"y":302,"wires":[["ad83c118.eb1d38"],[]]},{"id":"b0f2edb.6a1a41","type":"modbus-read","z":"b78441eb.815e5","name":"jit205TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"46","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":179,"y":359,"wires":[["407fe2f3.11b18c"],[]]},{"id":"86e7b5db.6b32c8","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":418,"y":184,"wires":[["92385acb.706d08"]]},{"id":"49d4252.085d7dc","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":416,"y":239,"wires":[["e2e696df.426db"]]},{"id":"ad83c118.eb1d38","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":405,"y":298,"wires":[["9d2e8fda.6adf5"]]},{"id":"407fe2f3.11b18c","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":360,"wires":[["4a9f783a.f499d8"]]},{"id":"3e5492de.6ce0fe","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":820.75,"y":209.75,"wires":[["50c54932.04ca9"]]},{"id":"404dd201.fd0d74","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":636.75,"y":107.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"92385acb.706d08","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":631.75,"y":176.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"50c54932.04ca9","type":"change","z":"b78441eb.815e5","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":877.75,"y":281.75,"wires":[["20b52d28.888eba","37400ae1.f9f8d6","742e1a2d.33792c"]]},{"id":"e2e696df.426db","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630.75,"y":235.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"9d2e8fda.6adf5","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630.75,"y":296.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"4a9f783a.f499d8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":626.75,"y":365.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"f51d65d5.de918","type":"comment","z":"b78441eb.815e5","name":"Somatório da produção total de energia","info":"Somatório da produção total de energia","x":770,"y":40,"wires":[]},{"id":"9373aa15.b2f788","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoTotalEnergy parte alta 300MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"300","quantity":"1","server":"e01ff31a.ec00c8","x":1249.25,"y":94,"wires":[[],[]]},{"id":"97859985.75948","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoTotalEnergy parte baixa 301 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"301","quantity":"1","server":"e01ff31a.ec00c8","x":1280,"y":160,"wires":[[],[]]},{"id":"20b52d28.888eba","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":988.25,"y":92.25,"wires":[["9373aa15.b2f788"]]},{"id":"37400ae1.f9f8d6","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1026,"y":145.75,"wires":[["97859985.75948"]]},{"id":"172f3820.b64f2","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte alta 302MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"302","quantity":"1","server":"e01ff31a.ec00c8","x":1400,"y":220,"wires":[[],[]]},{"id":"72a37499.e69564","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte baixa 303MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"303","quantity":"1","server":"e01ff31a.ec00c8","x":1478.5,"y":275.25,"wires":[[],[]]},{"id":"212015bc.0427a2","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":229,"wires":[["172f3820.b64f2"]]},{"id":"d5a1775.d831408","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1218,"y":273,"wires":[["72a37499.e69564"]]},{"id":"3bd7a9e2.04cce6","type":"comment","z":"b78441eb.815e5","name":"Escrita no barramento MB","info":"","x":1310,"y":40,"wires":[]},{"id":"c1aec990.7e3b68","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":870,"y":660,"wires":[["8162c400.f015c8"]]},{"id":"742e1a2d.33792c","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.5,"y":636.75,"wires":[["c1aec990.7e3b68"]]},{"id":"ff84e299.ed876","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":680,"wires":[["c1aec990.7e3b68"]]},{"id":"80e85b40.b2f9a8","type":"inject","z":"b78441eb.815e5","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":740,"wires":[["8c02e017.9077"]]},{"id":"8162c400.f015c8","type":"function","z":"b78441eb.815e5","name":"calculo do rendimento","func":"//multiplica dois elementos do array\nmsg.payload = msg.payload[0] * msg.payload[1] / 1000\nreturn msg;","outputs":1,"noerr":0,"x":1020,"y":420,"wires":[["212015bc.0427a2","d5a1775.d831408"]]},{"id":"ff4e629b.b18ef8","type":"comment","z":"b78441eb.815e5","name":"convertendo em int32","info":"","x":410,"y":20,"wires":[]},{"id":"cbdc1086.cd138","type":"comment","z":"b78441eb.815e5","name":"valor de 1 kWh em reais","info":"","x":140,"y":20,"wires":[]},{"id":"ce81ef65.065dd8","type":"modbus-read","z":"b78441eb.815e5","name":"jit201DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"4","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":800,"wires":[["1820e92f.36cebf"],[]]},{"id":"1820e92f.36cebf","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":463,"y":795,"wires":[["ca2e9c26.4e7fc8"]]},{"id":"9720945e.6aa4c","type":"modbus-read","z":"b78441eb.815e5","name":"jit202DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"14","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":222.5,"y":869,"wires":[["6f09f7ce.e64588"],[]]},{"id":"18c24447.5b7eec","type":"modbus-read","z":"b78441eb.815e5","name":"jit203DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"24","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":219.5,"y":932,"wires":[["bf839aa6.17c4"],[]]},{"id":"8f8eb8d3.7a113","type":"modbus-read","z":"b78441eb.815e5","name":"jit204DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"34","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":222.5,"y":989,"wires":[["6828ee72.909f2"],[]]},{"id":"9268da33.24de9","type":"modbus-read","z":"b78441eb.815e5","name":"jit205DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"44","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":226.5,"y":1046,"wires":[["3ce3317.68730ce"],[]]},{"id":"6f09f7ce.e64588","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":465.5,"y":871,"wires":[["2666e73e.279768"]]},{"id":"bf839aa6.17c4","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":463.5,"y":926,"wires":[["7e298d07.0d8424"]]},{"id":"6828ee72.909f2","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":452.5,"y":985,"wires":[["2879c83d.d9cd18"]]},{"id":"3ce3317.68730ce","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":457.5,"y":1047,"wires":[["25f278fc.e6fc38"]]},{"id":"596b305a.ec161","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":868.25,"y":896.75,"wires":[["4279c038.08e54"]]},{"id":"ca2e9c26.4e7fc8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":684.25,"y":794.75,"wires":[["596b305a.ec161"]]},{"id":"2666e73e.279768","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":679.25,"y":863.75,"wires":[["596b305a.ec161"]]},{"id":"4279c038.08e54","type":"change","z":"b78441eb.815e5","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":925.25,"y":968.75,"wires":[["df653be9.43f0c","ff71af32.8fc418","bd47e03e.d91a18"]]},{"id":"7e298d07.0d8424","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.25,"y":922.75,"wires":[["596b305a.ec161"]]},{"id":"2879c83d.d9cd18","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.25,"y":983.75,"wires":[["596b305a.ec161"]]},{"id":"25f278fc.e6fc38","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":674.25,"y":1052.75,"wires":[["596b305a.ec161"]]},{"id":"20134e15.073eb2","type":"comment","z":"b78441eb.815e5","name":"Somatório da produção total de energia","info":"Somatório da produção total de energia","x":817.5,"y":727,"wires":[]},{"id":"7904f015.1ea728","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoYearEnergy parte alta 312MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"312","quantity":"1","server":"e01ff31a.ec00c8","x":1296.75,"y":781,"wires":[[],[]]},{"id":"59a67f07.42fbb8","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoTotalEnergy parte baixa 313 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"313","quantity":"1","server":"e01ff31a.ec00c8","x":1327.5,"y":847,"wires":[[],[]]},{"id":"df653be9.43f0c","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1035.75,"y":779.25,"wires":[["7904f015.1ea728"]]},{"id":"ff71af32.8fc418","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1073.5,"y":832.75,"wires":[["59a67f07.42fbb8"]]},{"id":"2ab99733.ad4818","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte alta 314MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"314","quantity":"1","server":"e01ff31a.ec00c8","x":1447.5,"y":907,"wires":[[],[]]},{"id":"b3654bea.cc9b6","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte baixa 315MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"315","quantity":"1","server":"e01ff31a.ec00c8","x":1526,"y":962.25,"wires":[[],[]]},{"id":"50906e.8547a794","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1207.5,"y":916,"wires":[["2ab99733.ad4818"]]},{"id":"5ab48a23.e908f4","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1265.5,"y":960,"wires":[["b3654bea.cc9b6"]]},{"id":"920df1ac.f6cc68","type":"comment","z":"b78441eb.815e5","name":"Escrita no barramento MB","info":"","x":1357.5,"y":727,"wires":[]},{"id":"64e1f87a.4848c","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":870,"y":1340,"wires":[["39f32c44.584e0c"]]},{"id":"bd47e03e.d91a18","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.5,"y":1316.75,"wires":[["64e1f87a.4848c"]]},{"id":"174cd3ef.00f384","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":1360,"wires":[["64e1f87a.4848c"]]},{"id":"39f32c44.584e0c","type":"function","z":"b78441eb.815e5","name":"calculo do rendimento","func":"//multiplica dois elementos do array\nmsg.payload = msg.payload[0] * msg.payload[1] / 1000\nreturn msg;","outputs":1,"noerr":0,"x":987.5,"y":1087,"wires":[["50906e.8547a794","5ab48a23.e908f4"]]},{"id":"cea1a88.e2b8458","type":"comment","z":"b78441eb.815e5","name":"convertendo em int32","info":"","x":300,"y":740,"wires":[]},{"id":"58ee78a3.c0983","type":"modbus-read","z":"b78441eb.815e5","name":"jit201YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":252.5,"y":1493,"wires":[["d60100c1.4b6ec"],[]]},{"id":"d60100c1.4b6ec","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":495.5,"y":1488,"wires":[["555279d6.d28ea8"]]},{"id":"d18d0bca.59c6f8","type":"modbus-read","z":"b78441eb.815e5","name":"jit202YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"10","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":255,"y":1562,"wires":[["7ea9414f.2ffb98"],[]]},{"id":"1e49339c.438bac","type":"modbus-read","z":"b78441eb.815e5","name":"jit203YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"20","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":252,"y":1625,"wires":[["74999d.ca836e64"],[]]},{"id":"3116a1cf.0e030e","type":"modbus-read","z":"b78441eb.815e5","name":"jit204YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"30","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":255,"y":1682,"wires":[["de1ec242.a1cc28"],[]]},{"id":"e52f0534.cbb2f","type":"modbus-read","z":"b78441eb.815e5","name":"jit205YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"40","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":259,"y":1739,"wires":[["90d5162b.a9adc"],[]]},{"id":"7ea9414f.2ffb98","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":498,"y":1564,"wires":[["880450fe.438a68"]]},{"id":"74999d.ca836e64","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":496,"y":1619,"wires":[["df919a4.58c63e8"]]},{"id":"de1ec242.a1cc28","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":485,"y":1678,"wires":[["8e030cf1.dd9b68"]]},{"id":"90d5162b.a9adc","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":1740,"wires":[["4f78f394.15a374"]]},{"id":"d2b647d2.2e39c8","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":900.75,"y":1589.75,"wires":[["15c5b151.61c987"]]},{"id":"555279d6.d28ea8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":716.75,"y":1487.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"880450fe.438a68","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":711.75,"y":1556.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"15c5b151.61c987","type":"change","z":"b78441eb.815e5","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":957.75,"y":1661.75,"wires":[["7ae8a56.e8bd65c","5caeb171.e6909","82719611.1a29f8"]]},{"id":"df919a4.58c63e8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710.75,"y":1615.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"8e030cf1.dd9b68","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710.75,"y":1676.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"4f78f394.15a374","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.75,"y":1745.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"46faabb4.f329c4","type":"comment","z":"b78441eb.815e5","name":"Somatório da produção total de energia","info":"Somatório da produção total de energia","x":850,"y":1420,"wires":[]},{"id":"9bc9da36.bcf86","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoYearEnergy parte alta 304MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"304","quantity":"1","server":"e01ff31a.ec00c8","x":1329.25,"y":1474,"wires":[[],[]]},{"id":"425dd0b6.2e02a","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoTotalEnergy parte baixa 305 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"305","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1540,"wires":[[],[]]},{"id":"7ae8a56.e8bd65c","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1068.25,"y":1472.25,"wires":[["9bc9da36.bcf86"]]},{"id":"5caeb171.e6909","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1106,"y":1525.75,"wires":[["425dd0b6.2e02a"]]},{"id":"b124ca4e.41154","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte alta 306MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"306","quantity":"1","server":"e01ff31a.ec00c8","x":1480,"y":1600,"wires":[[],[]]},{"id":"9a01e474.5352b8","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoTotalEnergy parte baixa 307MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"307","quantity":"1","server":"e01ff31a.ec00c8","x":1558.5,"y":1655.25,"wires":[[],[]]},{"id":"d163b789.64f068","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1240,"y":1609,"wires":[["b124ca4e.41154"]]},{"id":"83e514c4.438cb","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1298,"y":1653,"wires":[["9a01e474.5352b8"]]},{"id":"f57b84b7.1522d","type":"comment","z":"b78441eb.815e5","name":"Escrita no barramento MB","info":"","x":1390,"y":1420,"wires":[]},{"id":"10f054e1.f01333","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":910,"y":2020,"wires":[["678083b1.79114c"]]},{"id":"82719611.1a29f8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":718.5,"y":1996.75,"wires":[["10f054e1.f01333"]]},{"id":"fcec9834.1742f8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2040,"wires":[["10f054e1.f01333"]]},{"id":"678083b1.79114c","type":"function","z":"b78441eb.815e5","name":"calculo do rendimento","func":"//multiplica dois elementos do array\nmsg.payload = msg.payload[0] * msg.payload[1] / 1000\nreturn msg;","outputs":1,"noerr":0,"x":1020,"y":1780,"wires":[["d163b789.64f068","83e514c4.438cb"]]},{"id":"51091c62.d3568c","type":"comment","z":"b78441eb.815e5","name":"convertendo em int32","info":"","x":460,"y":1420,"wires":[]},{"id":"fb5f8196.14bb5","type":"modbus-read","z":"9d6a8aef.4d42c8","name":"geracaoTOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"300","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":280,"wires":[["e6cab2f5.78d5e"],[]]},{"id":"e6cab2f5.78d5e","type":"function","z":"9d6a8aef.4d42c8","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":523,"y":275,"wires":[["d241c3d9.681278","3fbe0bc9.e2748c"]]},{"id":"eb35c26c.89d43","type":"modbus-write","z":"9d6a8aef.4d42c8","name":"economiaTonCO2 parte alta 316MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"316","quantity":"1","server":"e01ff31a.ec00c8","x":1340,"y":240,"wires":[[],[]]},{"id":"390429a6.6b3406","type":"function","z":"9d6a8aef.4d42c8","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1095.75,"y":259.25,"wires":[["eb35c26c.89d43"]]},{"id":"781e5e53.49146","type":"function","z":"9d6a8aef.4d42c8","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":300,"wires":[["ea60a08a.062928"]]},{"id":"717b3e8d.9d1a08","type":"comment","z":"9d6a8aef.4d42c8","name":"Escrita no barramento MB","info":"","x":1350,"y":180,"wires":[]},{"id":"aee4d905.995198","type":"comment","z":"9d6a8aef.4d42c8","name":"convertendo em int32","info":"","x":520,"y":200,"wires":[]},{"id":"a95d612d.692748","type":"debug","z":"9d6a8aef.4d42c8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":970,"y":160,"wires":[]},{"id":"d241c3d9.681278","type":"function","z":"9d6a8aef.4d42c8","name":"economiaTonCO2","func":"//constantes obtidas a partir da base Fronius\nmsg.payload = msg.payload * 0.000530524/1000\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":280,"wires":[["390429a6.6b3406","781e5e53.49146"]]},{"id":"1cbc34fd.fc7ae3","type":"function","z":"9d6a8aef.4d42c8","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1100,"y":360,"wires":[["d577457e.3ba5c8"]]},{"id":"b0127dee.ceb0b8","type":"function","z":"9d6a8aef.4d42c8","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1114.25,"y":400.75,"wires":[["21595b7c.66949c"]]},{"id":"3fbe0bc9.e2748c","type":"function","z":"9d6a8aef.4d42c8","name":"economiaArvores","func":"//constantes obtidas a partir da base Fronius\nmsg.payload = msg.payload * 0.013700747/1000\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":380,"wires":[["1cbc34fd.fc7ae3","b0127dee.ceb0b8"]]},{"id":"ea60a08a.062928","type":"modbus-write","z":"9d6a8aef.4d42c8","name":"economiaTonCO2 parte baixa 317MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"317","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":300,"wires":[[],[]]},{"id":"d577457e.3ba5c8","type":"modbus-write","z":"9d6a8aef.4d42c8","name":"economiaArvores parte alta 318MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"318","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":360,"wires":[[],[]]},{"id":"21595b7c.66949c","type":"modbus-write","z":"9d6a8aef.4d42c8","name":"economiaArvores parte alta 319MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"319","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":420,"wires":[[],[]]},{"id":"e76fd6a3.f4c708","type":"file","z":"b78441eb.815e5","name":"","filename":"nodeRedData/valorReaiskWh.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":420,"y":600,"wires":[[]]},{"id":"198b58e4.337897","type":"ui_numeric","z":"b78441eb.815e5","name":"","label":"Reais por kWh","tooltip":"","group":"7d706e5.8c6dd1","order":2,"width":0,"height":0,"passthru":true,"topic":"","format":"{{value}}","min":0,"max":10,"step":"0.01","x":160,"y":600,"wires":[["e76fd6a3.f4c708"]]},{"id":"8c02e017.9077","type":"file in","z":"b78441eb.815e5","name":"","filename":"nodeRedData/valorReaiskWh.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":280,"y":680,"wires":[["ff84e299.ed876","174cd3ef.00f384","fcec9834.1742f8","198b58e4.337897","175103b9.c9a85c"]]},{"id":"2629ff49.3bb62","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual201.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":570,"y":100,"wires":[[]]},{"id":"ee5eb9b4.737118","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior201.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1100,"y":80,"wires":[[]]},{"id":"2de0c592.296f22","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual201.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":390,"y":1260,"wires":[["2248979e.879f6"]]},{"id":"dcb74734.78798","type":"function","z":"9c48a530.854d18","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t//'day':\t\tdt.getDate(),\n\t//'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes()//,\n\t//'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":230,"y":1220,"wires":[["a259bed8.ad44b"]]},{"id":"31f7d437.b2de64","type":"inject","z":"9c48a530.854d18","name":"Force","topic":"","payload":"","payloadType":"date","repeat":"300","crontab":"","once":false,"onceDelay":"","x":80,"y":1540,"wires":[["dcb74734.78798","2de0c592.296f22","e6814387.a78ef","a6ef7362.bc1bb","fcc86544.24f5d8","b49aef20.fc5c3","ae381f9e.e0d208","dccd5d4a.e77ec8","62efbbc8.ddf1cc","b9e27d61.e330c8","560f5ec3.c2f4f8"]]},{"id":"a259bed8.ad44b","type":"function","z":"9c48a530.854d18","name":"payloadMonth","func":"msg.payload = msg.month;\n//msg.payload = msg.mins;\n//msg.payload = msg.hours;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1220,"wires":[["b1297cad.a5f07"]]},{"id":"b1297cad.a5f07","type":"function","z":"9c48a530.854d18","name":"detectaTrocaMês","func":"//var count=context.get('count') || 0;\nvar anterior=flow.get('anterior') || 0;\nvar atual=msg.payload;\n//count +=1;\n//msg.payload=\"F5 \"+msg.payload+\" \"+count;\n//msg.payload=msg.payload;\nif ( anterior == atual ) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nflow.set('anterior',atual);\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":1220,"wires":[["55026e72.9325a8","fed826b.f5a1358","5989ecfd.f0d01c","d4a8a570.a337e","d8167914.94287"]]},{"id":"81c93f95.a71ad8","type":"modbus-read","z":"9c48a530.854d18","name":"jit201TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"6","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":120,"y":140,"wires":[["e6a8af59.450f1"],[]]},{"id":"e6a8af59.450f1","type":"function","z":"9c48a530.854d18","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":152,"wires":[["3433ddce.372052","2629ff49.3bb62"]]},{"id":"957e9356.3cc5e8","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":730,"y":200,"wires":[["63050d49.21a0ec"]]},{"id":"3433ddce.372052","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":180,"wires":[["957e9356.3cc5e8"]]},{"id":"55026e72.9325a8","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":220,"wires":[["957e9356.3cc5e8"]]},{"id":"63050d49.21a0ec","type":"function","z":"9c48a530.854d18","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":880,"y":143,"wires":[["ee5eb9b4.737118"]]},{"id":"48d812d.e5b516c","type":"function","z":"9c48a530.854d18","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1010,"y":1204,"wires":[["b6662475.a36158","46c9c039.a0eb9"]]},{"id":"e6814387.a78ef","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior201.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":400,"y":1300,"wires":[["97ca478f.8880a"]]},{"id":"59a01f38.bda0c8","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":890,"y":1264,"wires":[["48d812d.e5b516c"]]},{"id":"2248979e.879f6","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1260,"wires":[["59a01f38.bda0c8"]]},{"id":"97ca478f.8880a","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1300,"wires":[["59a01f38.bda0c8"]]},{"id":"fad06b76.4da558","type":"comment","z":"9c48a530.854d18","name":"trocar para mês","info":"","x":460,"y":1180,"wires":[]},{"id":"a86ca4b4.251768","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte alta 8MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"8","quantity":"1","server":"e01ff31a.ec00c8","x":1340,"y":1264,"wires":[[],[]]},{"id":"63760a7.85ec674","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte baixa 9 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"9","quantity":"1","server":"e01ff31a.ec00c8","x":1350,"y":1324,"wires":[[],[]]},{"id":"b6662475.a36158","type":"function","z":"9c48a530.854d18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1100,"y":1264,"wires":[["a86ca4b4.251768"]]},{"id":"46c9c039.a0eb9","type":"function","z":"9c48a530.854d18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":1324,"wires":[["63760a7.85ec674"]]},{"id":"fb9a2e8e.63e9f","type":"comment","z":"9c48a530.854d18","name":"Só armazana se houver troca do mês","info":"","x":860,"y":40,"wires":[]},{"id":"c065f47f.8792c8","type":"comment","z":"9c48a530.854d18","name":"calcula a diferença entre total mês anterior e corrente","info":"","x":1070,"y":1164,"wires":[]},{"id":"20faf6de.794d12","type":"comment","z":"9c48a530.854d18","name":"jit201MonthEnergy","info":"","x":1410,"y":1200,"wires":[]},{"id":"fe0e755c.e4f72","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual202.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":570,"y":340,"wires":[[]]},{"id":"9d53d1dc.06642","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior202.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1100,"y":320,"wires":[[]]},{"id":"ebe7a079.888df","type":"function","z":"9c48a530.854d18","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":392,"wires":[["892ee32b.1278d","fe0e755c.e4f72"]]},{"id":"393e852f.ca224a","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":730,"y":440,"wires":[["bb47bf9d.47ebe8"]]},{"id":"892ee32b.1278d","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":420,"wires":[["393e852f.ca224a"]]},{"id":"d8167914.94287","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":460,"wires":[["393e852f.ca224a"]]},{"id":"bb47bf9d.47ebe8","type":"function","z":"9c48a530.854d18","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":880,"y":380,"wires":[["9d53d1dc.06642"]]},{"id":"48a9b0c0.2888c8","type":"comment","z":"9c48a530.854d18","name":"Só armazana se houver troca do mês","info":"","x":860,"y":280,"wires":[]},{"id":"7ae3b473.7af354","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual203.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":590,"y":560,"wires":[[]]},{"id":"6240ae48.df9db","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior203.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1120,"y":540,"wires":[[]]},{"id":"2e24f6f3.5d991a","type":"function","z":"9c48a530.854d18","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":612,"wires":[["9134cd86.c06e48","7ae3b473.7af354"]]},{"id":"486406a8.45fae8","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":660,"wires":[["8767983f.0b7ab"]]},{"id":"9134cd86.c06e48","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":640,"wires":[["486406a8.45fae8"]]},{"id":"d4a8a570.a337e","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":680,"wires":[["486406a8.45fae8"]]},{"id":"8767983f.0b7ab","type":"function","z":"9c48a530.854d18","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":900,"y":600,"wires":[["6240ae48.df9db"]]},{"id":"6c8d35f1.def9ec","type":"comment","z":"9c48a530.854d18","name":"Só armazana se houver troca do mês","info":"","x":880,"y":500,"wires":[]},{"id":"3ea5b27c.af252e","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual204.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":610,"y":780,"wires":[[]]},{"id":"89336ac4.bb1b38","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior204.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1140,"y":760,"wires":[[]]},{"id":"5fed470.7bc2938","type":"function","z":"9c48a530.854d18","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":832,"wires":[["da911c74.5e51b8","3ea5b27c.af252e"]]},{"id":"1ab036cf.df7e99","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":880,"wires":[["b64723ce.0465b8"]]},{"id":"da911c74.5e51b8","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":860,"wires":[["1ab036cf.df7e99"]]},{"id":"5989ecfd.f0d01c","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":900,"wires":[["1ab036cf.df7e99"]]},{"id":"b64723ce.0465b8","type":"function","z":"9c48a530.854d18","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":920,"y":820,"wires":[["89336ac4.bb1b38"]]},{"id":"d6ab3d7a.9cdf9","type":"comment","z":"9c48a530.854d18","name":"Só armazana se houver troca do mês","info":"","x":900,"y":720,"wires":[]},{"id":"dc1ca09.7d4ea6","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual205.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":610,"y":1000,"wires":[[]]},{"id":"f9e46740.f2a768","type":"file","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior205.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1140,"y":980,"wires":[[]]},{"id":"aea35889.00bda","type":"function","z":"9c48a530.854d18","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":1060,"wires":[["a9eb7cc5.73996","dc1ca09.7d4ea6"]]},{"id":"1552250b.7d067b","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":1100,"wires":[["524eb7d.c8a11c8"]]},{"id":"a9eb7cc5.73996","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1080,"wires":[["1552250b.7d067b"]]},{"id":"fed826b.f5a1358","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1120,"wires":[["1552250b.7d067b"]]},{"id":"524eb7d.c8a11c8","type":"function","z":"9c48a530.854d18","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\n    else \n      if (msg.payload[1] == true) {\n        msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":920,"y":1040,"wires":[["f9e46740.f2a768"]]},{"id":"b381e33b.c29768","type":"comment","z":"9c48a530.854d18","name":"Só armazana se houver troca do mês","info":"","x":900,"y":940,"wires":[]},{"id":"44866ba7.555b2c","type":"modbus-read","z":"9c48a530.854d18","name":"jit202TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"16","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":120,"y":400,"wires":[["ebe7a079.888df"],[]]},{"id":"9ae83830.b277","type":"modbus-read","z":"9c48a530.854d18","name":"jit203TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"26","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":160,"y":620,"wires":[["2e24f6f3.5d991a"],[]]},{"id":"79adaa8e.d03664","type":"modbus-read","z":"9c48a530.854d18","name":"jit204TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"36","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":140,"y":840,"wires":[["5fed470.7bc2938"],[]]},{"id":"c5bbe3c4.bf2608","type":"modbus-read","z":"9c48a530.854d18","name":"jit205TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"46","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":140,"y":1060,"wires":[["aea35889.00bda"],[]]},{"id":"a6ef7362.bc1bb","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual202.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":350,"y":1440,"wires":[["46c1fc6c.ed83cc"]]},{"id":"dae666d.d122118","type":"function","z":"9c48a530.854d18","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":970,"y":1384,"wires":[["b19af25f.ea18b","31e19855.5de488"]]},{"id":"fcc86544.24f5d8","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior202.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":360,"y":1480,"wires":[["7ec1050c.328df4"]]},{"id":"a44072aa.0d5618","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":1444,"wires":[["dae666d.d122118"]]},{"id":"46c1fc6c.ed83cc","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1440,"wires":[["a44072aa.0d5618"]]},{"id":"7ec1050c.328df4","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1480,"wires":[["a44072aa.0d5618"]]},{"id":"ad0aac.5d48c558","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte alta 18MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"18","quantity":"1","server":"e01ff31a.ec00c8","x":1310,"y":1444,"wires":[[],[]]},{"id":"f953170e.b15ad","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte baixa 19 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"19","quantity":"1","server":"e01ff31a.ec00c8","x":1310,"y":1504,"wires":[[],[]]},{"id":"b19af25f.ea18b","type":"function","z":"9c48a530.854d18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":1444,"wires":[["ad0aac.5d48c558"]]},{"id":"31e19855.5de488","type":"function","z":"9c48a530.854d18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":1504,"wires":[["f953170e.b15ad"]]},{"id":"b49aef20.fc5c3","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual203.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":330,"y":1640,"wires":[["49e72f2d.477cb8"]]},{"id":"7e4f1fe.b87556","type":"function","z":"9c48a530.854d18","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":950,"y":1584,"wires":[["3e60b58f.d01152","26011da1.d23ec2"]]},{"id":"ae381f9e.e0d208","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior203.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":340,"y":1680,"wires":[["df95f5d8.0cae88"]]},{"id":"a62b9a8d.0c791","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":1644,"wires":[["7e4f1fe.b87556"]]},{"id":"49e72f2d.477cb8","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":1640,"wires":[["a62b9a8d.0c791"]]},{"id":"df95f5d8.0cae88","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":1680,"wires":[["a62b9a8d.0c791"]]},{"id":"432a8e17.338758","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte alta 28MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"28","quantity":"1","server":"e01ff31a.ec00c8","x":1290,"y":1644,"wires":[[],[]]},{"id":"6ebcde51.b94528","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte baixa 29 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"29","quantity":"1","server":"e01ff31a.ec00c8","x":1290,"y":1704,"wires":[[],[]]},{"id":"3e60b58f.d01152","type":"function","z":"9c48a530.854d18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1040,"y":1644,"wires":[["432a8e17.338758"]]},{"id":"26011da1.d23ec2","type":"function","z":"9c48a530.854d18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":1704,"wires":[["6ebcde51.b94528"]]},{"id":"dccd5d4a.e77ec8","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual204.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":330,"y":1840,"wires":[["b01156e.2554628"]]},{"id":"880a5471.e64e08","type":"debug","z":"9c48a530.854d18","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1160,"y":1784,"wires":[]},{"id":"7b7c78cb.beac28","type":"function","z":"9c48a530.854d18","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":950,"y":1784,"wires":[["a4329329.1ec8","55c69def.998774"]]},{"id":"62efbbc8.ddf1cc","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior204.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":340,"y":1880,"wires":[["73919027.fd43e8"]]},{"id":"4c00eca7.3ff0ec","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":1844,"wires":[["7b7c78cb.beac28"]]},{"id":"b01156e.2554628","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":1840,"wires":[["4c00eca7.3ff0ec"]]},{"id":"73919027.fd43e8","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":650,"y":1880,"wires":[["4c00eca7.3ff0ec"]]},{"id":"da9e4744.787c58","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte alta 38MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"38","quantity":"1","server":"e01ff31a.ec00c8","x":1290,"y":1844,"wires":[[],[]]},{"id":"58ab95f5.2c110c","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte baixa 39 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"39","quantity":"1","server":"e01ff31a.ec00c8","x":1290,"y":1904,"wires":[[],[]]},{"id":"a4329329.1ec8","type":"function","z":"9c48a530.854d18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1040,"y":1844,"wires":[["da9e4744.787c58"]]},{"id":"55c69def.998774","type":"function","z":"9c48a530.854d18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":1904,"wires":[["58ab95f5.2c110c"]]},{"id":"b9e27d61.e330c8","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAtual205.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":350,"y":2020,"wires":[["f8581261.983198"]]},{"id":"f4c158e.86f5728","type":"debug","z":"9c48a530.854d18","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1180,"y":1964,"wires":[]},{"id":"c4232c99.5e93d","type":"function","z":"9c48a530.854d18","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":970,"y":1964,"wires":[["aef16f23.cd183","5d6075e4.0f0e6c"]]},{"id":"560f5ec3.c2f4f8","type":"file in","z":"9c48a530.854d18","name":"","filename":"nodeRedData/geracaoTotalGeralAteMesAnterior205.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":360,"y":2060,"wires":[["d4ea9f3c.edc248"]]},{"id":"ee4b1592.f7a65","type":"join","z":"9c48a530.854d18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":2024,"wires":[["c4232c99.5e93d"]]},{"id":"f8581261.983198","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":2020,"wires":[["ee4b1592.f7a65"]]},{"id":"d4ea9f3c.edc248","type":"change","z":"9c48a530.854d18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":2060,"wires":[["ee4b1592.f7a65"]]},{"id":"4bee5b48.db019c","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte alta 48MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"48","quantity":"1","server":"e01ff31a.ec00c8","x":1310,"y":2024,"wires":[[],[]]},{"id":"540a3228.c2d02c","type":"modbus-write","z":"9c48a530.854d18","name":"geracaoMonthEnergy parte baixa 49 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"49","quantity":"1","server":"e01ff31a.ec00c8","x":1310,"y":2084,"wires":[[],[]]},{"id":"aef16f23.cd183","type":"function","z":"9c48a530.854d18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":2024,"wires":[["4bee5b48.db019c"]]},{"id":"5d6075e4.0f0e6c","type":"function","z":"9c48a530.854d18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":2084,"wires":[["540a3228.c2d02c"]]},{"id":"64c2c14b.cc4e48","type":"modbus-read","z":"b78441eb.815e5","name":"jit201MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"8","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":2240,"wires":[["3f056b25.dd1ec4"],[]]},{"id":"3f056b25.dd1ec4","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":463,"y":2235,"wires":[["d0723ceb.abfcc"]]},{"id":"3637411a.d96d5e","type":"modbus-read","z":"b78441eb.815e5","name":"jit202MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"18","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":232.5,"y":2309,"wires":[["a29f1822.574cf"],[]]},{"id":"52a6ce38.01b4a","type":"modbus-read","z":"b78441eb.815e5","name":"jit203MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"28","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":229.5,"y":2372,"wires":[["245efc79.2dc0b4"],[]]},{"id":"ab7c36db.5d213","type":"modbus-read","z":"b78441eb.815e5","name":"jit204MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"38","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":232.5,"y":2429,"wires":[["73b0d75c.bfbb7"],[]]},{"id":"3337a9a6.f06526","type":"modbus-read","z":"b78441eb.815e5","name":"jit205MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"48","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":236.5,"y":2486,"wires":[["3a969dd4.9436e2"],[]]},{"id":"a29f1822.574cf","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":465.5,"y":2311,"wires":[["8b5bb465.cacaf8"]]},{"id":"245efc79.2dc0b4","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":463.5,"y":2366,"wires":[["ecbcc0cd.aef508"]]},{"id":"73b0d75c.bfbb7","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":452.5,"y":2425,"wires":[["bb26b6f9.df7418"]]},{"id":"3a969dd4.9436e2","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":457.5,"y":2487,"wires":[["6696ce4c.e8376"]]},{"id":"35006063.6b1d7","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":868.25,"y":2336.75,"wires":[["434c4807.718fe"]]},{"id":"d0723ceb.abfcc","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":2240,"wires":[["35006063.6b1d7"]]},{"id":"8b5bb465.cacaf8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":679.25,"y":2303.75,"wires":[["35006063.6b1d7"]]},{"id":"434c4807.718fe","type":"change","z":"b78441eb.815e5","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":925.25,"y":2408.75,"wires":[["a04bf29e.5698d8","c3c0f251.de373","51a4ec27.5df29c"]]},{"id":"ecbcc0cd.aef508","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.25,"y":2362.75,"wires":[["35006063.6b1d7"]]},{"id":"bb26b6f9.df7418","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.25,"y":2423.75,"wires":[["35006063.6b1d7"]]},{"id":"6696ce4c.e8376","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":674.25,"y":2492.75,"wires":[["35006063.6b1d7"]]},{"id":"20b5144d.98aae4","type":"comment","z":"b78441eb.815e5","name":"Somatório da produção total de energia","info":"Somatório da produção total de energia","x":817.5,"y":2167,"wires":[]},{"id":"d32bab40.2b7a98","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoMonthEnergy parte alta 308MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"308","quantity":"1","server":"e01ff31a.ec00c8","x":1306.75,"y":2221,"wires":[[],[]]},{"id":"d4de1e0c.dc1d28","type":"modbus-write","z":"b78441eb.815e5","name":"geracaoMonthEnergy parte baixa 309 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"309","quantity":"1","server":"e01ff31a.ec00c8","x":1347.5,"y":2287,"wires":[[],[]]},{"id":"a04bf29e.5698d8","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1035.75,"y":2219.25,"wires":[["d32bab40.2b7a98"]]},{"id":"c3c0f251.de373","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1073.5,"y":2272.75,"wires":[["d4de1e0c.dc1d28"]]},{"id":"cfaef247.35fa28","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoMonthEnergy parte alta 310MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"310","quantity":"1","server":"e01ff31a.ec00c8","x":1457.5,"y":2347,"wires":[[],[]]},{"id":"43b523db.31d574","type":"function","z":"b78441eb.815e5","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1207.5,"y":2356,"wires":[["cfaef247.35fa28"]]},{"id":"591d890c.14d9b8","type":"function","z":"b78441eb.815e5","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1265.5,"y":2400,"wires":[["c3129070.0f307"]]},{"id":"82fd03a6.fb305","type":"comment","z":"b78441eb.815e5","name":"Escrita no barramento MB","info":"","x":1357.5,"y":2167,"wires":[]},{"id":"a28320f2.f447c","type":"join","z":"b78441eb.815e5","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":870,"y":2780,"wires":[["beca3f25.7deee"]]},{"id":"51a4ec27.5df29c","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":2720,"wires":[["a28320f2.f447c"]]},{"id":"175103b9.c9a85c","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":2800,"wires":[["a28320f2.f447c"]]},{"id":"beca3f25.7deee","type":"function","z":"b78441eb.815e5","name":"calculo do rendimento","func":"//multiplica dois elementos do array\nmsg.payload = msg.payload[0] * msg.payload[1] / 1000\nreturn msg;","outputs":1,"noerr":0,"x":987.5,"y":2527,"wires":[["43b523db.31d574","591d890c.14d9b8"]]},{"id":"ca3e63ef.2463e8","type":"comment","z":"b78441eb.815e5","name":"convertendo em int32","info":"","x":427.5,"y":2167,"wires":[]},{"id":"c3129070.0f307","type":"modbus-write","z":"b78441eb.815e5","name":"rendimentoMonthEnergy parte baixa 311MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"311","quantity":"1","server":"e01ff31a.ec00c8","x":1540,"y":2420,"wires":[[],[]]},{"id":"15c4e73b.b2ca11","type":"debug","z":"9c48a530.854d18","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1160,"y":1584,"wires":[]},{"id":"a66ff54f.33d49","type":"debug","z":"9c48a530.854d18","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1180,"y":1384,"wires":[]},{"id":"faa90218.488d9","type":"debug","z":"9c48a530.854d18","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1220,"y":1204,"wires":[]},{"id":"4220c94d.ca49d","type":"inject","z":"157208c6.81a43f","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":70,"y":360,"wires":[["271b4a42.83638e","afd7dec0.9ccce","fefd977d.388a48","efb1fb2d.841818","2fad64a1.f52c5c","4e85372b.1e5da","f8e2f24b.d2a8b","f777e6.218eb818","92a3f2d7.17e848","4caf3623.556f68","6ff0ef33.e144d8","9603fbbd.2d1d48","fa892690.5b745","aef8dd93.85fcf8","cc25ccd7.36233","3ac08b52.eff5bc"]]},{"id":"271b4a42.83638e","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.88 inversor fronius 1","host":"10.80.0.88","timeout":"2","requests":"1","x":360,"y":60,"wires":[["c94b636b.7a914"]]},{"id":"b039fac7.4774b8","type":"modbus-write","z":"157208c6.81a43f","name":"conectividade 400MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"400","quantity":"1","server":"e01ff31a.ec00c8","x":920,"y":560,"wires":[[],[]]},{"id":"afd7dec0.9ccce","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.88 inversor fronius 1","host":"10.80.0.88","timeout":"2","requests":"1","x":360,"y":100,"wires":[["b23c08bd.b00398"]]},{"id":"fefd977d.388a48","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.88 inversor fronius 3","host":"10.80.0.88","timeout":"2","requests":"1","x":360,"y":140,"wires":[["dbc0389.c9898c8"]]},{"id":"efb1fb2d.841818","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.88 inversor fronius 4","host":"10.80.0.88","timeout":"2","requests":"1","x":360,"y":180,"wires":[["426d68bd.5e61f8"]]},{"id":"2fad64a1.f52c5c","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.84 inversor fronius 5","host":"10.80.0.88","timeout":"2","requests":"1","x":360,"y":220,"wires":[["a0641bd4.37ded8"]]},{"id":"4e85372b.1e5da","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.27 inversor ginlong 1","host":"10.80.0.27","timeout":"2","requests":"1","x":360,"y":260,"wires":[["3285b046.8b7718"]]},{"id":"f8e2f24b.d2a8b","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.27 inversor ginlong 2","host":"10.80.0.12","timeout":"2","requests":"1","x":360,"y":300,"wires":[["38468915.e15eae"]]},{"id":"c94b636b.7a914","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":60,"wires":[["e33f2db2.8ef89"]]},{"id":"e33f2db2.8ef89","type":"join","z":"157208c6.81a43f","name":"join com chave para índice","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"16","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":930,"y":360,"wires":[["f8a8a1ed.22e7e"]]},{"id":"b23c08bd.b00398","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":100,"wires":[["e33f2db2.8ef89"]]},{"id":"dbc0389.c9898c8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":140,"wires":[["e33f2db2.8ef89"]]},{"id":"426d68bd.5e61f8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":180,"wires":[["e33f2db2.8ef89"]]},{"id":"a0641bd4.37ded8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":220,"wires":[["e33f2db2.8ef89"]]},{"id":"3285b046.8b7718","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":260,"wires":[["e33f2db2.8ef89"]]},{"id":"38468915.e15eae","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":300,"wires":[["e33f2db2.8ef89"]]},{"id":"3ac08b52.eff5bc","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":340,"wires":[["e33f2db2.8ef89"]]},{"id":"f777e6.218eb818","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":380,"wires":[["e33f2db2.8ef89"]]},{"id":"92a3f2d7.17e848","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"9","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":420,"wires":[["e33f2db2.8ef89"]]},{"id":"4caf3623.556f68","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":460,"wires":[["e33f2db2.8ef89"]]},{"id":"6ff0ef33.e144d8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":500,"wires":[["e33f2db2.8ef89"]]},{"id":"cc25ccd7.36233","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":540,"wires":[["e33f2db2.8ef89"]]},{"id":"9603fbbd.2d1d48","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":580,"wires":[["e33f2db2.8ef89"]]},{"id":"fa892690.5b745","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"14","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":620,"wires":[["e33f2db2.8ef89"]]},{"id":"aef8dd93.85fcf8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"15","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":660,"wires":[["e33f2db2.8ef89"]]},{"id":"c8426fb4.e3b0d8","type":"comment","z":"157208c6.81a43f","name":"geradores de energia","info":"","x":330,"y":20,"wires":[]},{"id":"55cb67b9.315b6","type":"comment","z":"157208c6.81a43f","name":"RESERVADO","info":"","x":350,"y":440,"wires":[]},{"id":"f8a8a1ed.22e7e","type":"function","z":"157208c6.81a43f","name":"converte msg.payload array para 0 e 1","func":"//msg.payload = [msg.payload[1],msg.payload[2]];\n//var conectividade = [];\nfor (i = 0; i <= 15; i++) {\n  if (typeof msg.payload[i] == \"number\") {\n    msg.payload[i] = 1;\n  }\n  else {\n     msg.payload[i] = 0;\n  }\n}\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":420,"wires":[["e8b2c652.be657"]]},{"id":"95aa9d68.e9124","type":"comment","z":"157208c6.81a43f","name":"index de 1 a 16","info":"","x":574.75,"y":26.75,"wires":[]},{"id":"e8b2c652.be657","type":"function","z":"157208c6.81a43f","name":"converte msg.paylod array em int 16","func":"//msg.payload = msg.payload[0] * (2 ** 0) + msg.payload[1] * (2 ** 1) + msg.payload[2] * (2 ** 2);\nvar conectividade = 0 ;\nfor (i = 0; i <= 15; i++) {\n    conectividade = msg.payload[i] * (2 ** i) + conectividade;\n}\nmsg.payload = conectividade;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":480,"wires":[["b039fac7.4774b8"]]},{"id":"ed4994a.705e268","type":"inject","z":"157208c6.81a43f","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":70,"y":1080,"wires":[["63d71d21.70ba34","68247af.6b88484","496f7670.58ccb","f905a915.b9dea","a7ec5fc8.4557f","3628ac1e.917ee4","46c3453d.e31484","67c6966e.023ad8","bf62090a.c5dd68","a0482b7e.175e28","96fc17a1.35be88","27b3c110.daf2e6","c92a2473.c862d","2b95ff1f.4473d8","1deea171.a91a87","9d2ffa33.38a88"]]},{"id":"63d71d21.70ba34","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.110 energia jt301 bl A","host":"10.80.0.110","timeout":"2","requests":"1","x":360,"y":780,"wires":[["4725c807.2f391"]]},{"id":"f9396587.d9012","type":"modbus-write","z":"157208c6.81a43f","name":"conectividade 401MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"401","quantity":"1","server":"e01ff31a.ec00c8","x":920,"y":1280,"wires":[[],[]]},{"id":"68247af.6b88484","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.111 energia jt302 bl A","host":"10.80.0.111","timeout":"2","requests":"1","x":360,"y":820,"wires":[["4b1777b2.389f28"]]},{"id":"496f7670.58ccb","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.112 energia jt303 bl A","host":"10.80.0.112","timeout":"2","requests":"1","x":360,"y":860,"wires":[["5b46cbfc.5d1e7c"]]},{"id":"f905a915.b9dea","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.113 energia jt304 bl B","host":"10.80.0.113","timeout":"2","requests":"1","x":360,"y":900,"wires":[["ec3ce2d8.db0548"]]},{"id":"a7ec5fc8.4557f","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.114 energia jt305 bl B","host":"10.80.0.114","timeout":"2","requests":"1","x":360,"y":940,"wires":[["90e896de.d81c78"]]},{"id":"3628ac1e.917ee4","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.115 energia jt306 bl B","host":"10.80.0.115","timeout":"2","requests":"1","x":360,"y":980,"wires":[["5a887ae9.3464a4"]]},{"id":"4725c807.2f391","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":780,"wires":[["92807347.c3b2"]]},{"id":"92807347.c3b2","type":"join","z":"157208c6.81a43f","name":"join com chave para índice","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"16","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":920,"y":1080,"wires":[["ed52926.53f557"]]},{"id":"4b1777b2.389f28","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":820,"wires":[["92807347.c3b2"]]},{"id":"5b46cbfc.5d1e7c","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":860,"wires":[["92807347.c3b2"]]},{"id":"ec3ce2d8.db0548","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":900,"wires":[["92807347.c3b2"]]},{"id":"90e896de.d81c78","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":940,"wires":[["92807347.c3b2"]]},{"id":"5a887ae9.3464a4","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":980,"wires":[["92807347.c3b2"]]},{"id":"795d346a.5ad324","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1020,"wires":[["92807347.c3b2"]]},{"id":"9636697b.960c3","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1060,"wires":[["92807347.c3b2"]]},{"id":"1547d383.a9425c","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1100,"wires":[["92807347.c3b2"]]},{"id":"be9bb48b.a010f","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"9","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1140,"wires":[["92807347.c3b2"]]},{"id":"645c4875.19f3c8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1180,"wires":[["92807347.c3b2"]]},{"id":"9d2ffa33.38a88","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1220,"wires":[["92807347.c3b2"]]},{"id":"f37ec2a9.984828","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1260,"wires":[["92807347.c3b2"]]},{"id":"823a7647.5aae88","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1300,"wires":[["92807347.c3b2"]]},{"id":"36034d7e.1a1b7a","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"14","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1340,"wires":[["92807347.c3b2"]]},{"id":"2086a122.d72146","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"15","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1380,"wires":[["92807347.c3b2"]]},{"id":"2bbda33a.bccaac","type":"comment","z":"157208c6.81a43f","name":"medidores consumo de energia","info":"","x":360,"y":740,"wires":[]},{"id":"ed52926.53f557","type":"function","z":"157208c6.81a43f","name":"converte msg.payload array para 0 e 1","func":"//msg.payload = [msg.payload[1],msg.payload[2]];\n//var conectividade = [];\nfor (i = 0; i <= 15; i++) {\n  if (typeof msg.payload[i] == \"number\") {\n    msg.payload[i] = 1;\n  }\n  else {\n     msg.payload[i] = 0;\n  }\n}\nreturn msg;","outputs":1,"noerr":0,"x":960,"y":1140,"wires":[["905cad36.7c3e68"]]},{"id":"11b6d147.466cd7","type":"comment","z":"157208c6.81a43f","name":"index de 1 a 16","info":"","x":574.75,"y":746.75,"wires":[]},{"id":"905cad36.7c3e68","type":"function","z":"157208c6.81a43f","name":"converte msg.paylod array em int 16","func":"//msg.payload = msg.payload[0] * (2 ** 0) + msg.payload[1] * (2 ** 1) + msg.payload[2] * (2 ** 2);\nvar conectividade = 0 ;\nfor (i = 0; i <= 15; i++) {\n    conectividade = msg.payload[i] * (2 ** i) + conectividade;\n}\nmsg.payload = conectividade;\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":1200,"wires":[["f9396587.d9012"]]},{"id":"46c3453d.e31484","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.116 energia jt310 bl C","host":"10.80.0.116","timeout":"2","requests":"1","x":360,"y":1020,"wires":[["795d346a.5ad324"]]},{"id":"67c6966e.023ad8","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.117 energia jt311 bl C","host":"10.80.0.117","timeout":"2","requests":"1","x":360,"y":1060,"wires":[["9636697b.960c3"]]},{"id":"bf62090a.c5dd68","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.118 energia jt312 bl C","host":"10.80.0.118","timeout":"2","requests":"1","x":360,"y":1100,"wires":[["1547d383.a9425c"]]},{"id":"a0482b7e.175e28","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.119 energia jt313 guarita","host":"10.80.0.119","timeout":"2","requests":"1","x":370,"y":1140,"wires":[["be9bb48b.a010f"]]},{"id":"96fc17a1.35be88","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.120 energia jt314 guarita","host":"10.80.0.120","timeout":"2","requests":"1","x":370,"y":1180,"wires":[["645c4875.19f3c8"]]},{"id":"27b3c110.daf2e6","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.122 energia jt318 oficina","host":"10.80.0.122","timeout":"2","requests":"1","x":361,"y":1260,"wires":[["f37ec2a9.984828"]]},{"id":"c92a2473.c862d","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.123 energia 319 oficina","host":"10.80.0.123","timeout":"2","requests":"1","x":361,"y":1300,"wires":[["823a7647.5aae88"]]},{"id":"2b95ff1f.4473d8","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.124 energia 320 oficina","host":"10.80.0.124","timeout":"2","requests":"1","x":361,"y":1340,"wires":[["36034d7e.1a1b7a"]]},{"id":"1deea171.a91a87","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.125 energia jt315 externo","host":"10.80.0.125","timeout":"2","requests":"1","x":361,"y":1380,"wires":[["2086a122.d72146"]]},{"id":"3db40874.35bcc","type":"inject","z":"157208c6.81a43f","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":70,"y":1760,"wires":[["dc1ca64c.5bb34","c3091751.96c32","9e43e579.ea6958","be7d76bd.a21948","e368f2af.5dd3e8","7fc7ab56.1bf48c","44410226.df42f4","8ec01c97.104e58","5571cfa8.601d08","fba85633.63d858","cf595b36.b05da","2c7a3111.7a0d96","e1051375.184728","de30684f.1edc9","de81c77d.15d3c","d79117e9.feea18"]]},{"id":"c87c199a.35e498","type":"modbus-write","z":"157208c6.81a43f","name":"conectividade 402MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"402","quantity":"1","server":"e01ff31a.ec00c8","x":920,"y":1960,"wires":[[],[]]},{"id":"a0caca87.ebeba","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1460,"wires":[["1725e4dc.0bc2b3"]]},{"id":"1725e4dc.0bc2b3","type":"join","z":"157208c6.81a43f","name":"join com chave para índice","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"16","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":930,"y":1760,"wires":[["5c85c7e2.fc1118"]]},{"id":"303cac70.e80f1c","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1500,"wires":[["1725e4dc.0bc2b3"]]},{"id":"ab312d59.137138","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1540,"wires":[["1725e4dc.0bc2b3"]]},{"id":"a2e6b119.b4507","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1580,"wires":[["1725e4dc.0bc2b3"]]},{"id":"a2d35906.4062f8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1620,"wires":[["1725e4dc.0bc2b3"]]},{"id":"cd4e3ff5.0342d","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1660,"wires":[["1725e4dc.0bc2b3"]]},{"id":"9e2570df.1f9bb8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1700,"wires":[["1725e4dc.0bc2b3"]]},{"id":"cb42f3a5.5508e","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1740,"wires":[["1725e4dc.0bc2b3"]]},{"id":"9e43e579.ea6958","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1780,"wires":[["1725e4dc.0bc2b3"]]},{"id":"be7d76bd.a21948","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"9","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1820,"wires":[["1725e4dc.0bc2b3"]]},{"id":"e368f2af.5dd3e8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1860,"wires":[["1725e4dc.0bc2b3"]]},{"id":"7fc7ab56.1bf48c","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1900,"wires":[["1725e4dc.0bc2b3"]]},{"id":"44410226.df42f4","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1940,"wires":[["1725e4dc.0bc2b3"]]},{"id":"8ec01c97.104e58","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1980,"wires":[["1725e4dc.0bc2b3"]]},{"id":"5571cfa8.601d08","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"14","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2020,"wires":[["1725e4dc.0bc2b3"]]},{"id":"fba85633.63d858","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"15","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2060,"wires":[["1725e4dc.0bc2b3"]]},{"id":"b915620d.cbbfc8","type":"comment","z":"157208c6.81a43f","name":"medidores consumo de energia","info":"","x":351,"y":1420,"wires":[]},{"id":"1edeec81.8bb60b","type":"comment","z":"157208c6.81a43f","name":"RESERVADO","info":"","x":370,"y":1820,"wires":[]},{"id":"5c85c7e2.fc1118","type":"function","z":"157208c6.81a43f","name":"converte msg.payload array para 0 e 1","func":"//msg.payload = [msg.payload[1],msg.payload[2]];\n//var conectividade = [];\nfor (i = 0; i <= 15; i++) {\n  if (typeof msg.payload[i] == \"number\") {\n    msg.payload[i] = 1;\n  }\n  else {\n     msg.payload[i] = 0;\n  }\n}\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":1820,"wires":[["31fec4ff.a591ac"]]},{"id":"7f1c916a.26d4d8","type":"comment","z":"157208c6.81a43f","name":"index de 1 a 16","info":"","x":574.75,"y":1426.75,"wires":[]},{"id":"31fec4ff.a591ac","type":"function","z":"157208c6.81a43f","name":"converte msg.paylod array em int 16","func":"//msg.payload = msg.payload[0] * (2 ** 0) + msg.payload[1] * (2 ** 1) + msg.payload[2] * (2 ** 2);\nvar conectividade = 0 ;\nfor (i = 0; i <= 15; i++) {\n    conectividade = msg.payload[i] * (2 ** i) + conectividade;\n}\nmsg.payload = conectividade;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":1880,"wires":[["c87c199a.35e498"]]},{"id":"dc1ca64c.5bb34","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.126 energia jt316 externo","host":"10.80.0.126","timeout":"2","requests":"1","x":361,"y":1460,"wires":[["a0caca87.ebeba"]]},{"id":"c3091751.96c32","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.127 energia  jt317 externo","host":"10.80.0.127","timeout":"2","requests":"1","x":361,"y":1500,"wires":[["303cac70.e80f1c"]]},{"id":"a52f051.d5f0c78","type":"inject","z":"157208c6.81a43f","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":70,"y":2440,"wires":[["254caa66.807a36","ede34f14.57b81","3b33e3f9.81debc","cffc36af.f76218","99a7aefd.9d0de","b1768bc5.a3b628","94933344.5089e8","fe006482.d7abc8","c277dc40.0bea58","739502c.30506fc","652604f6.1723a4","41543ff6.04686","744012bc.702454","48e15dd5.4872bc","db790cfc.c8465","f19b9b7e.8b34a8"]]},{"id":"3d2d812f.f364d6","type":"modbus-write","z":"157208c6.81a43f","name":"conectividade 403MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"403","quantity":"1","server":"e01ff31a.ec00c8","x":920,"y":2640,"wires":[[],[]]},{"id":"8784fb58.da343","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2140,"wires":[["a18838ec.e5ad68"]]},{"id":"a18838ec.e5ad68","type":"join","z":"157208c6.81a43f","name":"join com chave para índice","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"16","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":930,"y":2440,"wires":[["8c47e0a2.44d858"]]},{"id":"6641aed7.85b1e8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2180,"wires":[["a18838ec.e5ad68"]]},{"id":"3948e2ce.3bddae","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2220,"wires":[["a18838ec.e5ad68"]]},{"id":"6f863bd1.b2517c","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2260,"wires":[["a18838ec.e5ad68"]]},{"id":"edba1162.7d4e7","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2300,"wires":[["a18838ec.e5ad68"]]},{"id":"4a5d2f3e.813cb8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2340,"wires":[["a18838ec.e5ad68"]]},{"id":"3b33e3f9.81debc","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2380,"wires":[["a18838ec.e5ad68"]]},{"id":"cffc36af.f76218","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2420,"wires":[["a18838ec.e5ad68"]]},{"id":"99a7aefd.9d0de","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2460,"wires":[["a18838ec.e5ad68"]]},{"id":"b1768bc5.a3b628","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"9","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2500,"wires":[["a18838ec.e5ad68"]]},{"id":"94933344.5089e8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"10","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2540,"wires":[["a18838ec.e5ad68"]]},{"id":"fe006482.d7abc8","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"11","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2580,"wires":[["a18838ec.e5ad68"]]},{"id":"c277dc40.0bea58","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"12","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2620,"wires":[["a18838ec.e5ad68"]]},{"id":"739502c.30506fc","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"13","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2660,"wires":[["a18838ec.e5ad68"]]},{"id":"652604f6.1723a4","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"14","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2700,"wires":[["a18838ec.e5ad68"]]},{"id":"41543ff6.04686","type":"change","z":"157208c6.81a43f","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"15","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2740,"wires":[["a18838ec.e5ad68"]]},{"id":"64c29955.8296b8","type":"comment","z":"157208c6.81a43f","name":"medidores consumo de água","info":"","x":360,"y":2100,"wires":[]},{"id":"5a6b97af.458568","type":"comment","z":"157208c6.81a43f","name":"RESERVADO","info":"","x":370,"y":2440,"wires":[]},{"id":"8c47e0a2.44d858","type":"function","z":"157208c6.81a43f","name":"converte msg.payload array para 0 e 1","func":"//msg.payload = [msg.payload[1],msg.payload[2]];\n//var conectividade = [];\nfor (i = 0; i <= 15; i++) {\n  if (typeof msg.payload[i] == \"number\") {\n    msg.payload[i] = 1;\n  }\n  else {\n     msg.payload[i] = 0;\n  }\n}\nreturn msg;","outputs":1,"noerr":0,"x":970,"y":2500,"wires":[["5fb0ae30.84873"]]},{"id":"3cf905f6.025e3a","type":"comment","z":"157208c6.81a43f","name":"index de 1 a 16","info":"","x":574.75,"y":2106.75,"wires":[]},{"id":"5fb0ae30.84873","type":"function","z":"157208c6.81a43f","name":"converte msg.paylod array em int 16","func":"//msg.payload = msg.payload[0] * (2 ** 0) + msg.payload[1] * (2 ** 1) + msg.payload[2] * (2 ** 2);\nvar conectividade = 0 ;\nfor (i = 0; i <= 15; i++) {\n    conectividade = msg.payload[i] * (2 ** i) + conectividade;\n}\nmsg.payload = conectividade;\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":2560,"wires":[["3d2d812f.f364d6"]]},{"id":"254caa66.807a36","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.129 controlador ETA","host":"10.80.0.126","timeout":"2","requests":"1","x":360,"y":2140,"wires":[["8784fb58.da343"]]},{"id":"ede34f14.57b81","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.130 vazão ETA","host":"10.80.0.130","timeout":"2","requests":"1","x":340,"y":2180,"wires":[["6641aed7.85b1e8"]]},{"id":"744012bc.702454","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.131 vazão bl A","host":"10.80.0.131","timeout":"2","requests":"1","x":340,"y":2220,"wires":[["3948e2ce.3bddae"]]},{"id":"db790cfc.c8465","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.132 vazão bl B","host":"10.80.0.132","timeout":"2","requests":"1","x":340,"y":2260,"wires":[["6f863bd1.b2517c"]]},{"id":"48e15dd5.4872bc","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.133 vazão bl C","host":"10.80.0.133","timeout":"2","requests":"1","x":340,"y":2300,"wires":[["edba1162.7d4e7"]]},{"id":"f19b9b7e.8b34a8","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.134 vazão guarita","host":"10.80.0.134","timeout":"2","requests":"1","x":350,"y":2340,"wires":[["4a5d2f3e.813cb8"]]},{"id":"3dee2a59.a00d76","type":"debug","z":"b78441eb.815e5","name":"custo","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":530,"y":720,"wires":[]},{"id":"b41dc9ee.8a4b4","type":"debug","z":"b78441eb.815e5","name":"rendimento","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1200,"y":580,"wires":[]},{"id":"fed59374.b15be","type":"debug","z":"b78441eb.815e5","name":"rendimentoMes","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1140,"y":2120,"wires":[]},{"id":"4d3798e7.60b448","type":"comment","z":"9c48a530.854d18","name":"Este elemento do vetor é bool e só fica true na virada do mês --->","info":"","x":230,"y":460,"wires":[]},{"id":"9f207666.0f6fd8","type":"modbus-read","z":"b78441eb.815e5","name":"G1TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"56","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":420,"wires":[["3d2203de.5af73c"],[]]},{"id":"171d6c27.4ab114","type":"modbus-read","z":"b78441eb.815e5","name":"G2TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"66","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":173,"y":477,"wires":[["599d4541.3ec47c"],[]]},{"id":"c4f30a99.d7b678","type":"modbus-read","z":"b78441eb.815e5","name":"G3TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"76","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":520,"wires":[["e2e8550c.cb5b58"],[]]},{"id":"3d2203de.5af73c","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":420,"wires":[["547e25de.c251fc"]]},{"id":"599d4541.3ec47c","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":413,"y":473,"wires":[["5f5205d4.290aac"]]},{"id":"e2e8550c.cb5b58","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":520,"wires":[["3ca2c06f.e129"]]},{"id":"547e25de.c251fc","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":420,"wires":[["3e5492de.6ce0fe"]]},{"id":"5f5205d4.290aac","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":638.75,"y":471.75,"wires":[["3e5492de.6ce0fe"]]},{"id":"3ca2c06f.e129","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":520,"wires":[["3e5492de.6ce0fe"]]},{"id":"94ac929b.77fa8","type":"modbus-read","z":"b78441eb.815e5","name":"G1DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"52","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":1120,"wires":[["6d4fe762.a3e7d8"],[]]},{"id":"9fc19c26.de9bc","type":"modbus-read","z":"b78441eb.815e5","name":"G2DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"62","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":233,"y":1177,"wires":[["b636bf32.494cb"],[]]},{"id":"43868e92.9384e","type":"modbus-read","z":"b78441eb.815e5","name":"G3DAY_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"72","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":1220,"wires":[["bbbc08c1.cebdf8"],[]]},{"id":"6d4fe762.a3e7d8","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1120,"wires":[["2b6e8a4e.9d0816"]]},{"id":"b636bf32.494cb","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":473,"y":1173,"wires":[["96d7e60c.7381d8"]]},{"id":"bbbc08c1.cebdf8","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1220,"wires":[["4621f7f7.eb6898"]]},{"id":"2b6e8a4e.9d0816","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1120,"wires":[["596b305a.ec161"]]},{"id":"96d7e60c.7381d8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":698.75,"y":1171.75,"wires":[["596b305a.ec161"]]},{"id":"4621f7f7.eb6898","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1220,"wires":[["596b305a.ec161"]]},{"id":"5c622fbb.d1f28","type":"modbus-read","z":"b78441eb.815e5","name":"G1YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"58","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":250,"y":1800,"wires":[["91114120.ae016"],[]]},{"id":"b2bf5c60.643","type":"modbus-read","z":"b78441eb.815e5","name":"G2YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"68","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":253,"y":1857,"wires":[["269bce09.4f79f2"],[]]},{"id":"b3b194bb.256ea8","type":"modbus-read","z":"b78441eb.815e5","name":"G3YEAR_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"78","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":250,"y":1900,"wires":[["d40e92f6.4d8b5"],[]]},{"id":"91114120.ae016","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1800,"wires":[["55789049.c35c4"]]},{"id":"269bce09.4f79f2","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":493,"y":1853,"wires":[["e9beb2d1.a822d"]]},{"id":"d40e92f6.4d8b5","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1900,"wires":[["9f498047.80af8"]]},{"id":"55789049.c35c4","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1800,"wires":[["d2b647d2.2e39c8"]]},{"id":"e9beb2d1.a822d","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":718.75,"y":1851.75,"wires":[["d2b647d2.2e39c8"]]},{"id":"9f498047.80af8","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1900,"wires":[["d2b647d2.2e39c8"]]},{"id":"b3d86e2f.d8db2","type":"modbus-read","z":"b78441eb.815e5","name":"G1MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"54","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":2540,"wires":[["b25ce230.45aee"],[]]},{"id":"2e788514.17523a","type":"modbus-read","z":"b78441eb.815e5","name":"G2MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"64","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":223,"y":2597,"wires":[["c634f9ff.9a3928"],[]]},{"id":"8bd8302d.65536","type":"modbus-read","z":"b78441eb.815e5","name":"G3MONTH_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"admin","dataType":"HoldingRegister","adr":"76","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":2640,"wires":[["d982f95b.fc2e18"],[]]},{"id":"b25ce230.45aee","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":2540,"wires":[["da9e2d8a.75a75"]]},{"id":"c634f9ff.9a3928","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":453,"y":2593,"wires":[["60adb0c8.021da"]]},{"id":"d982f95b.fc2e18","type":"function","z":"b78441eb.815e5","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":2640,"wires":[["b9d5e208.126eb"]]},{"id":"da9e2d8a.75a75","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":2540,"wires":[["35006063.6b1d7"]]},{"id":"60adb0c8.021da","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"7","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":678.75,"y":2591.75,"wires":[["35006063.6b1d7"]]},{"id":"b9d5e208.126eb","type":"change","z":"b78441eb.815e5","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"8","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":2640,"wires":[["35006063.6b1d7"]]},{"id":"32bf9480.9e73cc","type":"comment","z":"9c48a530.854d18","name":"ENDEREÇOS","info":"Valores em Wh\nINVERSOR 1\n0 = YEAR_ENERGY parte alta\n1 = YEAR_ENERGY parte baixa\n2 = PAC parte alta\n3 = PAC parte baixa\n4 = DAY_ENERGY parte alta\n5 = DAY_ENERGY parte baixa\n6 = TOTAL_ENERGY parte alta\n7 = TOTAL_ENERGY parte baixa\n8 = TOTAL_MONTH parte alta implementado no NODE-RED\n9 = TOTAL_MONTH parte baixa implementado no NODE-RED\nINVERSOR 2\n10 = YEAR_ENERGY parte alta\n11 = YEAR_ENERGY parte baixa\n12 = PAC parte alta\n13 = PAC parte baixa\n14 = DAY_ENERGY parte alta\n15 = DAY_ENERGY parte baixa\n16 = TOTAL_ENERGY parte alta\n17 = TOTAL_ENERGY parte baixa\n18 = TOTAL_MONTH parte alta implementado no NODE-RED\n19 = TOTAL_MONTH parte baixa implementado no NODE-RED\nINVERSOR 3\n20 = YEAR_ENERGY parte alta\n21 = YEAR_ENERGY parte baixa\n22 = PAC parte alta\n23 = PAC parte baixa\n24 = DAY_ENERGY parte alta\n25 = DAY_ENERGY parte baixa\n26 = TOTAL_ENERGY parte alta\n27 = TOTAL_ENERGY parte baixa\n28 = TOTAL_MONTH parte alta implementado no NODE-RED\n29 = TOTAL_MONTH parte baixa implementado no NODE-RED\nINVERSOR 4\n30 = YEAR_ENERGY parte alta\n31 = YEAR_ENERGY parte baixa\n32 = PAC parte alta\n33 = PAC parte baixa\n34 = DAY_ENERGY parte alta\n35 = DAY_ENERGY parte baixa\n36 = TOTAL_ENERGY parte alta\n37 = TOTAL_ENERGY parte baixa\n38 = TOTAL_MONTH parte alta implementado no NODE-RED\n39 = TOTAL_MONTH parte baixa implementado no NODE-RED\nINVERSOR 5\n40 = YEAR_ENERGY parte alta\n41 = YEAR_ENERGY parte baixa\n42 = PAC parte alta\n43 = PAC parte baixa\n44 = DAY_ENERGY parte alta\n45 = DAY_ENERGY parte baixa\n46 = TOTAL_ENERGY parte alta\n47 = TOTAL_ENERGY parte baixa\n48 = TOTAL_MONTH parte alta implementado no NODE-RED\n49 = TOTAL_MONTH parte baixa implementado no NODE-RED\n\nCÁLCULOS DO RENDIMENTO, ECONOMIA E OUTROS \n#300 ~ 349 Cálculos do rendimento, economia e outros\n\n300 geracaoTotalEnergy parte alta em Wh\n301 geracaoTotalEnergy parte baixa\n302 rendimentoTotalEnergy parte alta em R$\n303 rendimentoTotalEnergy parte baixa\n304 geracaoYearEnergy parte alta em W\n305 geracaoYearEnergy parte baixa\n306 rendimentoYearEnergy parte alta em R$\n307 rendimentoYearEnergy parte baixa\n308 geracaoMonthEnergy parte alta em Wh\n309 geracaoMonthEnergy parte baixa\n310 rendimentoMonthEnergy parte alta em R$\n311 rendimentoMonthEnergy parte baixa\n312 geracaoDayEnergy parte alta em Wh\n313 geracaoDayEnergy parte baixa\n314 rendimentoDayEnergy parte alta em R$\n315 rendimentoDayEnergy parte baixa\n316 economiaTotalTonCO2 parte alta\n317 economiaTotalTonCO2 parte baixa\n318 economiaTotalArvores parte alta\n319 economiaTotalArvores parte baixa\n320 consumoPACEnergy parte alta em W\n321 consumoPACEnergy parte baixa em W\n322 consumoDayEnergy parte alta em Wh\n323 consumoDayEnergy parte baixa em Wh\n324 consumoMonthEnergy parte alta em Wh\n325 consumoMonthEnergy parte baixa em Wh\n326 consumoYearEnergy parte alta em Wh\n327 consumoYearEnergy parte baixa em Wh\n328 consumoTotalEnergy parte alta em Wh\n329 consumoTotalEnergy parte baixa em Wh\n330\n331\n332\n333\n334\n335\n336\n337\n338\n339\n340\n341\n342\n343\n344\n345\n346\n347\n348\n349\n","x":150,"y":60,"wires":[]},{"id":"cbbcfa0c.2a15e8","type":"function","z":"b17b4e3a.148a","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":990,"y":980,"wires":[["b8f52284.80879","d67dc4b8.43e4e8"]]},{"id":"ac47a49f.6172c8","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1040,"wires":[["cbbcfa0c.2a15e8"]]},{"id":"e2457d0b.99db1","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1036,"wires":[["ac47a49f.6172c8"]]},{"id":"c075f71d.2d9d68","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1076,"wires":[["ac47a49f.6172c8"]]},{"id":"c86c73d4.f1656","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte alta 68MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"68","quantity":"1","server":"e01ff31a.ec00c8","x":1330,"y":1040,"wires":[[],[]]},{"id":"32859276.059f6e","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte baixa 69 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"69","quantity":"1","server":"e01ff31a.ec00c8","x":1320,"y":1100,"wires":[[],[]]},{"id":"b8f52284.80879","type":"function","z":"b17b4e3a.148a","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1080,"y":1040,"wires":[["c86c73d4.f1656"]]},{"id":"d67dc4b8.43e4e8","type":"function","z":"b17b4e3a.148a","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":1100,"wires":[["32859276.059f6e"]]},{"id":"b83fb5ad.b68a08","type":"function","z":"b17b4e3a.148a","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":970,"y":1180,"wires":[["ffc7c607.e11aa8","12c052f0.a236dd"]]},{"id":"ad42a386.54889","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":1240,"wires":[["b83fb5ad.b68a08"]]},{"id":"1a0aa61f.d56a9a","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1236,"wires":[["ad42a386.54889"]]},{"id":"1de5db56.3d24f5","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1276,"wires":[["ad42a386.54889"]]},{"id":"66ea14c2.a3eadc","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte alta 78MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"78","quantity":"1","server":"e01ff31a.ec00c8","x":1310,"y":1240,"wires":[[],[]]},{"id":"9addddc4.0981b","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte baixa 79 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"79","quantity":"1","server":"e01ff31a.ec00c8","x":1300,"y":1300,"wires":[[],[]]},{"id":"ffc7c607.e11aa8","type":"function","z":"b17b4e3a.148a","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":1240,"wires":[["66ea14c2.a3eadc"]]},{"id":"12c052f0.a236dd","type":"function","z":"b17b4e3a.148a","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":1300,"wires":[["9addddc4.0981b"]]},{"id":"ed2f839e.ff322","type":"debug","z":"b17b4e3a.148a","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1180,"y":1180,"wires":[]},{"id":"ac30a741.4aa208","type":"debug","z":"b17b4e3a.148a","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1200,"y":980,"wires":[]},{"id":"9c1a57ba.6e8d28","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual211.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":610,"y":96,"wires":[[]]},{"id":"714fea83.58b4a4","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior211.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1140,"y":76,"wires":[[]]},{"id":"277543c0.652dcc","type":"function","z":"b17b4e3a.148a","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t//'day':\t\tdt.getDate(),\n\t'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes()//,\n\t//'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":816,"wires":[["cfbf00fa.d825c"]]},{"id":"9599e876.8b56a8","type":"inject","z":"b17b4e3a.148a","name":"Force","topic":"","payload":"","payloadType":"date","repeat":"300","crontab":"","once":false,"onceDelay":"","x":100,"y":960,"wires":[["277543c0.652dcc","a128569a.88d1d8","53df303.6cb9bd","2dcf4e2c.6b6222","a0ac4074.92153","1ce29f07.6c9ab1","b269207e.62681"]]},{"id":"cfbf00fa.d825c","type":"function","z":"b17b4e3a.148a","name":"payloadYear","func":"msg.payload = msg.year;\n//msg.payload = msg.mins;\n//msg.payload = msg.hours;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":816,"wires":[["1436449d.0ccc1b"]]},{"id":"1436449d.0ccc1b","type":"function","z":"b17b4e3a.148a","name":"detectaTrocaAno","func":"//var count=context.get('count') || 0;\nvar anterior=flow.get('anterior') || 0;\nvar atual=msg.payload;\n//count +=1;\n//msg.payload=\"F5 \"+msg.payload+\" \"+count;\n//msg.payload=msg.payload;\nif ( anterior == atual ) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nflow.set('anterior',atual);\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":816,"wires":[["9751979.0dd1a68","db38ce41.1ad07","a861e3d3.8d2cb"]]},{"id":"a2fbba4.42f4448","type":"modbus-read","z":"b17b4e3a.148a","name":"jit211TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"56","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":160,"y":140,"wires":[["5641837.f66be7c"],[]]},{"id":"5641837.f66be7c","type":"function","z":"b17b4e3a.148a","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":148,"wires":[["8691def2.76411","9c1a57ba.6e8d28"]]},{"id":"b2dcd17b.7c0dc","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":196,"wires":[["1594b735.cad9d9"]]},{"id":"8691def2.76411","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":176,"wires":[["b2dcd17b.7c0dc"]]},{"id":"9751979.0dd1a68","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":216,"wires":[["b2dcd17b.7c0dc"]]},{"id":"1594b735.cad9d9","type":"function","z":"b17b4e3a.148a","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":920,"y":139,"wires":[["714fea83.58b4a4"]]},{"id":"4c67eca1.c03144","type":"function","z":"b17b4e3a.148a","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1030,"y":800,"wires":[["cfb57c22.e86cc","b73562fd.753f8"]]},{"id":"811309c5.13e148","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":910,"y":860,"wires":[["4c67eca1.c03144"]]},{"id":"151c7577.4dee5b","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":856,"wires":[["811309c5.13e148"]]},{"id":"3d592b53.6ee294","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":900,"wires":[["811309c5.13e148"]]},{"id":"fbd5f5a7.25a958","type":"comment","z":"b17b4e3a.148a","name":"trocar para ano","info":"","x":480,"y":776,"wires":[]},{"id":"d8ff423d.0f002","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte alta 8MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"58","quantity":"1","server":"e01ff31a.ec00c8","x":1350,"y":860,"wires":[[],[]]},{"id":"616404b.73b69fc","type":"modbus-write","z":"b17b4e3a.148a","name":"geracaoYearEnergy parte baixa 59 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"59","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":920,"wires":[[],[]]},{"id":"cfb57c22.e86cc","type":"function","z":"b17b4e3a.148a","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":860,"wires":[["d8ff423d.0f002"]]},{"id":"b73562fd.753f8","type":"function","z":"b17b4e3a.148a","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":920,"wires":[["616404b.73b69fc"]]},{"id":"ec20c929.55b668","type":"comment","z":"b17b4e3a.148a","name":"Só armazana se houver troca do ano","info":"","x":900,"y":36,"wires":[]},{"id":"b9d417c5.c94f28","type":"comment","z":"b17b4e3a.148a","name":"calcula a diferença entre total ano anterior e corrente","info":"","x":1080,"y":760,"wires":[]},{"id":"e66ec0dc.cfb4c","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual212.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":610,"y":336,"wires":[[]]},{"id":"e6c8ec62.a8c22","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior212.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1140,"y":316,"wires":[[]]},{"id":"18b69031.08c33","type":"function","z":"b17b4e3a.148a","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":388,"wires":[["cf4a76b2.cc7408","e66ec0dc.cfb4c"]]},{"id":"8eb172e2.1031a","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":436,"wires":[["ff18f530.678ed8"]]},{"id":"cf4a76b2.cc7408","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":416,"wires":[["8eb172e2.1031a"]]},{"id":"a861e3d3.8d2cb","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":456,"wires":[["8eb172e2.1031a"]]},{"id":"ff18f530.678ed8","type":"function","z":"b17b4e3a.148a","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":920,"y":376,"wires":[["e6c8ec62.a8c22"]]},{"id":"e39a35f3.86aad8","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual213.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":630,"y":556,"wires":[[]]},{"id":"dc3711b5.59598","type":"file","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior213.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1160,"y":536,"wires":[[]]},{"id":"6c2e5aa7.9a93a4","type":"function","z":"b17b4e3a.148a","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":608,"wires":[["73da072f.6764f8","e39a35f3.86aad8"]]},{"id":"8899b071.78ad3","type":"join","z":"b17b4e3a.148a","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":790,"y":656,"wires":[["7c0d95aa.62036c"]]},{"id":"73da072f.6764f8","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":636,"wires":[["8899b071.78ad3"]]},{"id":"db38ce41.1ad07","type":"change","z":"b17b4e3a.148a","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":676,"wires":[["8899b071.78ad3"]]},{"id":"7c0d95aa.62036c","type":"function","z":"b17b4e3a.148a","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":940,"y":596,"wires":[["dc3711b5.59598"]]},{"id":"b08f7005.d9175","type":"modbus-read","z":"b17b4e3a.148a","name":"jit212TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"66","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":160,"y":396,"wires":[["18b69031.08c33"],[]]},{"id":"5bbb3f2d.6e6fb","type":"modbus-read","z":"b17b4e3a.148a","name":"jit213TOTAL_ENERGY","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"76","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":160,"y":600,"wires":[["6c2e5aa7.9a93a4"],[]]},{"id":"b5694241.edda4","type":"debug","z":"b17b4e3a.148a","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1240,"y":800,"wires":[]},{"id":"aa0517a3.0c6a58","type":"comment","z":"b17b4e3a.148a","name":"Este elemento do vetor é bool e só fica true na virada do ano --->","info":"","x":270,"y":456,"wires":[]},{"id":"d315d164.e67ad","type":"comment","z":"b17b4e3a.148a","name":"ENDEREÇOS","info":"valores em Wh\nINVERSOR G1\n50 = PAC parte alta\n51 = PAC parte baixa\n52 = DAY_ENERGY parte alta\n53 = DAY_ENERGY parte baixa\n54 = MONTH_ENERGY parte alta\n55 = MONTH_ENERGY parte baixa\n56 = TOTAL_ENERGY parte alta\n57 = TOTAL_ENERGY parte baixa\n58 = YEAR_ENERGY parte alta\n59 = YEAR_ENERGY parte baixa\n\nINVERSOR G2\n60 = PAC parte alta\n61 = PAC parte baixa\n62 = DAY_ENERGY parte alta\n63 = DAY_ENERGY parte baixa\n64 = MONTH_ENERGY parte alta\n65 = MONTH_ENERGY parte baixa\n66 = TOTAL_ENERGY parte alta\n67 = TOTAL_ENERGY parte baixa\n68 = YEAR_ENERGY parte alta\n69 = YEAR_ENERGY parte baixa\n\nINVERSOR G3\n70 = PAC parte alta\n71 = PAC parte baixa\n72 = DAY_ENERGY parte alta\n73 = DAY_ENERGY parte baixa\n74 = MONTH_ENERGY parte alta\n75 = MONTH_ENERGY parte baixa\n76 = TOTAL_ENERGY parte alta\n77 = TOTAL_ENERGY parte baixa\n78 = YEAR_ENERGY parte alta\n79 = YEAR_ENERGY parte baixa","x":210,"y":40,"wires":[]},{"id":"c3af4fe8.92f93","type":"comment","z":"b17b4e3a.148a","name":"Só armazana se houver troca do ano","info":"","x":890,"y":260,"wires":[]},{"id":"ff658996.73c328","type":"comment","z":"b17b4e3a.148a","name":"Só armazana se houver troca do ano","info":"","x":902,"y":480,"wires":[]},{"id":"971f4acd.05e8d8","type":"comment","z":"14572cfb.10d313","name":"ENDEREÇOS","info":"LOCALIZAÇÃO DOS MEDIDORES\nFIT101 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO A\nFIT102 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO B\nFIT103 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO C\nFIT104 - ENTRADA DE AǴUA PARA A GUARITA\nFIT105 - ENTRADA DE ÁGUA PARA O TRANQUE DE ARMAZENAMENTO DA ESTAÇÃO DE TRATAMENTO DE ÁGUA \n\nflow = vazão instantânea\nvolume = vazão totalizada\n\n200 - vazão instantânea em m3/h do FIT101 parte alta\n201 - vazão instantânea em m3/h do FIT101 parte baixa\n202 - vazão totalizada em m3 do FIT101 parte alta\n203 - vazão totalizada em m3 do FIT101 parte baixa\n204 - vazão instantânea em m3/h do FIT102 parte alta\n205 - vazão instantânea em m3/h do FIT102 parte baixa\n206 - vazão totalizada em m3 do FIT102 parte alta\n207 - vazão totalizada em m3 do FIT102 parte baixa\n208 - vazão instantânea em m3/h do FIT103 parte alta\n209 - vazão instantânea em m3/h do FIT103 parte baixa\n210 - vazão totalizada em m3 do FIT103 parte alta\n211 - vazão totalizada em m3 do FIT103 parte baixa\n212 - vazão instantânea em m3/h do FIT104 parte alta\n213 - vazão instantânea em m3/h do FIT104 parte baixa\n214 - vazão totalizada em m3 do FIT104 parte alta\n215 - vazão totalizada em m3 do FIT104 parte baixa\n216 - vazão instantânea em m3/h do FIT105 parte alta\n217 - vazão instantânea em m3/h do FIT105 parte baixa\n218 - vazão totalizada em m3 do FIT105 parte alta\n219 - vazão totalizada em m3 do FIT105 parte baixa\n\n\nVAZÃO TOTALIZADA DIA, MÊS E ANO DOS MEDIDORES DE VAZÃO - NODE-RED\n#220 ~ 269\n\n220 DAY_VOLUME parte alta em m3 FIT101\n221 DAY_VOLUME parte baixa em m3  FIT101\n222 MONTH_VOLUME parte alta em m3  FIT101\n223 MONTH_VOLUME parte baixa em m3  FIT101\n224 YEAR_VOLUME parte alta em m3  FIT101\n225 YEAR_VOLUME parte baixa em m3  FIT101\nTOTAL_VOLUME nos endereços originais  FIT101 MB 202 203\n230 DAY_VOLUME parte alta em m3 FIT102\n231 DAY_VOLUME parte baixa em m3  FIT102\n232 MONTH_VOLUME parte alta em m3  FIT102\n233 MONTH_VOLUME parte baixa em m3  FIT102\n234 YEAR_VOLUME parte alta em m3  FIT102\n235 YEAR_VOLUME parte baixa em m3  FIT102\nTOTAL_VOLUME nos endereços originais  FIT102 MB 206 207\n240 DAY_VOLUME parte alta em m3 FIT103\n241 DAY_VOLUME parte baixa em m3  FIT103\n242 MONTH_VOLUME parte alta em m3  FIT103\n243 MONTH_VOLUME parte baixa em m3  FIT103\n244 YEAR_VOLUME parte alta em m3  FIT103\n245 YEAR_VOLUME parte baixa em m3  FIT103\nTOTAL_VOLUME nos endereços originais  FIT103 MB 210 211\n250 DAY_VOLUME parte alta em m3 FIT104\n251 DAY_VOLUME parte baixa em m3  FIT104\n252 MONTH_VOLUME parte alta em m3  FIT104\n253 MONTH_VOLUME parte baixa em m3  FIT104\n254 YEAR_VOLUME parte alta em m3  FIT104\n255 YEAR_VOLUME parte baixa em m3  FIT104\nTOTAL_VOLUME nos endereços originais  FIT104 MB 214 215\n260 DAY_VOLUME parte alta em m3 FIT105\n261 DAY_VOLUME parte baixa em m3  FIT105\n262 MONTH_VOLUME parte alta em m3  FIT105\n263 MONTH_VOLUME parte baixa em m3  FIT105\n264 YEAR_VOLUME parte alta em m3  FIT105\n265 YEAR_VOLUME parte baixa em m3  FIT105\nTOTAL_VOLUME nos endereços originais  FIT105 MB 218 219\n","x":130,"y":60,"wires":[]},{"id":"590e2aad.666874","type":"inject","z":"14572cfb.10d313","name":"Force","topic":"","payload":"","payloadType":"date","repeat":"300","crontab":"","once":false,"onceDelay":"","x":120,"y":1500,"wires":[["398a511f.cbd5fe","2d45408f.6583d","c3b8be80.6e7e7","1dc43e16.6076d2","59407c38.209d84","350680e3.d0baa","9e812be5.f14108","fb4822a1.a4706","e5466501.3976c8","b1fa6160.36592","6bcfde7f.7c10c"]]},{"id":"c1e0282b.9cf8b8","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":660,"y":100,"wires":[[]]},{"id":"fc622cc9.1c61e","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1180,"y":100,"wires":[[]]},{"id":"398a511f.cbd5fe","type":"function","z":"14572cfb.10d313","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t//'day':\t\tdt.getDate(),\n\t//'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes()//,\n\t//'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":1220,"wires":[["d21b0b44.25cf88"]]},{"id":"d21b0b44.25cf88","type":"function","z":"14572cfb.10d313","name":"payloadMonth","func":"msg.payload = msg.month;\n//msg.payload = msg.mins;\n//msg.payload = msg.hours;\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":1220,"wires":[["22a0e393.40f77c"]]},{"id":"22a0e393.40f77c","type":"function","z":"14572cfb.10d313","name":"detectaTrocaMês","func":"//var count=context.get('count') || 0;\nvar anterior=flow.get('anterior') || 0;\nvar atual=msg.payload;\n//count +=1;\n//msg.payload=\"F5 \"+msg.payload+\" \"+count;\n//msg.payload=msg.payload;\nif ( anterior == atual ) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nflow.set('anterior',atual);\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1220,"wires":[["54ec4ec4.bb09a","a41cc390.f6168","ea62a1ae.6fb71","b2d3a831.a41ed8","67914b6c.99fb04"]]},{"id":"aab994b4.594ec8","type":"modbus-read","z":"14572cfb.10d313","name":"fit101TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"202","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":180,"y":160,"wires":[["4847c981.75ad38"],[]]},{"id":"4847c981.75ad38","type":"function","z":"14572cfb.10d313","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":152,"wires":[["f0bd2fe.49b04d","c1e0282b.9cf8b8"]]},{"id":"39e07db7.02c352","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":200,"wires":[["d961eb05.3353c8"]]},{"id":"f0bd2fe.49b04d","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":180,"wires":[["39e07db7.02c352"]]},{"id":"54ec4ec4.bb09a","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":220,"wires":[["39e07db7.02c352"]]},{"id":"d961eb05.3353c8","type":"function","z":"14572cfb.10d313","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":980,"y":143,"wires":[["fc622cc9.1c61e"]]},{"id":"81b9b218.e6e8a","type":"function","z":"14572cfb.10d313","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1110,"y":1204,"wires":[["b77536cd.2bead8","bc9f09b5.94c0f8"]]},{"id":"d0613cbf.a1ca8","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":990,"y":1264,"wires":[["81b9b218.e6e8a"]]},{"id":"41df1d40.7d4514","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1260,"wires":[["d0613cbf.a1ca8"]]},{"id":"ea4d1ef7.fca25","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1300,"wires":[["d0613cbf.a1ca8"]]},{"id":"f5ea5ebc.fa26a","type":"comment","z":"14572cfb.10d313","name":"trocar para mês","info":"","x":560,"y":1180,"wires":[]},{"id":"465240.c1f4ddc","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 222MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"222","quantity":"1","server":"e01ff31a.ec00c8","x":1420,"y":1264,"wires":[[],[]]},{"id":"b77536cd.2bead8","type":"function","z":"14572cfb.10d313","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1264,"wires":[["465240.c1f4ddc"]]},{"id":"bc9f09b5.94c0f8","type":"function","z":"14572cfb.10d313","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":1324,"wires":[["cf46ced.9d0403"]]},{"id":"b529b37d.d1ea","type":"comment","z":"14572cfb.10d313","name":"Só armazana se houver troca do mês","info":"","x":960,"y":40,"wires":[]},{"id":"155fbe3a.bca042","type":"comment","z":"14572cfb.10d313","name":"calcula a diferença entre total mês anterior e corrente","info":"","x":1170,"y":1164,"wires":[]},{"id":"57fa3def.c0c6e4","type":"comment","z":"14572cfb.10d313","name":"jit201MonthEnergy","info":"","x":1510,"y":1200,"wires":[]},{"id":"995924c2.a78fb8","type":"function","z":"14572cfb.10d313","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":392,"wires":[["8fe13e92.01649","9605ffc4.47d0b"]]},{"id":"5e70db3d.29b454","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":440,"wires":[["5d127b6b.67e2e4"]]},{"id":"8fe13e92.01649","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":420,"wires":[["5e70db3d.29b454"]]},{"id":"67914b6c.99fb04","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":460,"wires":[["5e70db3d.29b454"]]},{"id":"5d127b6b.67e2e4","type":"function","z":"14572cfb.10d313","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":980,"y":380,"wires":[["55cca04b.e996c"]]},{"id":"68864aa4.a24994","type":"comment","z":"14572cfb.10d313","name":"Só armazana se houver troca do mês","info":"","x":960,"y":280,"wires":[]},{"id":"16c48969.fbfa27","type":"function","z":"14572cfb.10d313","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":612,"wires":[["f705a779.814bf8","9776416b.be993"]]},{"id":"5d7d230f.41f4ac","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":660,"wires":[["39ae6af9.b6e076"]]},{"id":"f705a779.814bf8","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":640,"wires":[["5d7d230f.41f4ac"]]},{"id":"b2d3a831.a41ed8","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":680,"wires":[["5d7d230f.41f4ac"]]},{"id":"39ae6af9.b6e076","type":"function","z":"14572cfb.10d313","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1000,"y":600,"wires":[["77afd4bb.1f704c"]]},{"id":"a18cea56.414d68","type":"comment","z":"14572cfb.10d313","name":"Só armazana se houver troca do mês","info":"","x":980,"y":500,"wires":[]},{"id":"28c485db.5a3a1a","type":"function","z":"14572cfb.10d313","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":832,"wires":[["e916ee2b.2d79a","65fc8748.2f9cb8"]]},{"id":"d4595dc2.b32f4","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":880,"wires":[["ec4b5fde.91d85"]]},{"id":"e916ee2b.2d79a","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":860,"wires":[["d4595dc2.b32f4"]]},{"id":"ea62a1ae.6fb71","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":900,"wires":[["d4595dc2.b32f4"]]},{"id":"ec4b5fde.91d85","type":"function","z":"14572cfb.10d313","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1020,"y":820,"wires":[["b9440192.f5b0b"]]},{"id":"2dc8dc58.947934","type":"comment","z":"14572cfb.10d313","name":"Só armazana se houver troca do mês","info":"","x":1000,"y":720,"wires":[]},{"id":"7c175481.8e69ac","type":"function","z":"14572cfb.10d313","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1060,"wires":[["a8473820.e581c8","c5d5605.05b21a"]]},{"id":"c416d414.cb1858","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1100,"wires":[["e3a4b5e0.1aec18"]]},{"id":"a8473820.e581c8","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1080,"wires":[["c416d414.cb1858"]]},{"id":"a41cc390.f6168","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1120,"wires":[["c416d414.cb1858"]]},{"id":"e3a4b5e0.1aec18","type":"function","z":"14572cfb.10d313","name":"valorParaTotalAtéMêsAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\n    else \n      if (msg.payload[1] == true) {\n        msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1020,"y":1040,"wires":[["fe5b63c8.7584d"]]},{"id":"5dc53835.9d15f8","type":"comment","z":"14572cfb.10d313","name":"Só armazana se houver troca do mês","info":"","x":1000,"y":940,"wires":[]},{"id":"1a180036.f1516","type":"function","z":"14572cfb.10d313","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":1384,"wires":[["91ee0997.069218","63789c90.423764"]]},{"id":"7c12477b.be1d88","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":1444,"wires":[["1a180036.f1516"]]},{"id":"ca5ee6db.ed2568","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1440,"wires":[["7c12477b.be1d88"]]},{"id":"ed9edeb7.b6a92","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1480,"wires":[["7c12477b.be1d88"]]},{"id":"91ee0997.069218","type":"function","z":"14572cfb.10d313","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":1444,"wires":[["a0700335.2bc59"]]},{"id":"63789c90.423764","type":"function","z":"14572cfb.10d313","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":1504,"wires":[["872b612d.73a4"]]},{"id":"13c6e269.a5e9be","type":"function","z":"14572cfb.10d313","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1584,"wires":[["576d512a.21c3a","71aaec3c.1322c4"]]},{"id":"8c882699.bfbb88","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1644,"wires":[["13c6e269.a5e9be"]]},{"id":"6152d07d.03662","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1640,"wires":[["8c882699.bfbb88"]]},{"id":"37aa63b5.aa1cdc","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1680,"wires":[["8c882699.bfbb88"]]},{"id":"576d512a.21c3a","type":"function","z":"14572cfb.10d313","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1644,"wires":[["cace05db.601a88"]]},{"id":"71aaec3c.1322c4","type":"function","z":"14572cfb.10d313","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1704,"wires":[["e111c88.daac438"]]},{"id":"99e98a8.a400b78","type":"debug","z":"14572cfb.10d313","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1160,"y":2240,"wires":[]},{"id":"b6ed1b29.6b1c38","type":"function","z":"14572cfb.10d313","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1784,"wires":[["4e5fdb73.b82e64","a10999b6.b89148"]]},{"id":"47b61855.bdd818","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1844,"wires":[["b6ed1b29.6b1c38"]]},{"id":"ecfba0e1.3b0d1","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1840,"wires":[["47b61855.bdd818"]]},{"id":"ac44d00e.66357","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1880,"wires":[["47b61855.bdd818"]]},{"id":"4e5fdb73.b82e64","type":"function","z":"14572cfb.10d313","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1844,"wires":[["f40f7e61.abfb2"]]},{"id":"a10999b6.b89148","type":"function","z":"14572cfb.10d313","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1904,"wires":[["8e0edee8.93739"]]},{"id":"2590b375.7b605c","type":"debug","z":"14572cfb.10d313","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":1964,"wires":[]},{"id":"e5f439fd.7540d8","type":"function","z":"14572cfb.10d313","name":"geracaoMesAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":1964,"wires":[["de61e073.1ae7a","6e2b480e.377c38"]]},{"id":"b6d7aa26.9e04b8","type":"join","z":"14572cfb.10d313","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":2024,"wires":[["e5f439fd.7540d8"]]},{"id":"3da6b997.b3e926","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2020,"wires":[["b6d7aa26.9e04b8"]]},{"id":"1eb2692c.67cbe7","type":"change","z":"14572cfb.10d313","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2060,"wires":[["b6d7aa26.9e04b8"]]},{"id":"de61e073.1ae7a","type":"function","z":"14572cfb.10d313","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":2024,"wires":[["2ee7e8aa.9e0218"]]},{"id":"6e2b480e.377c38","type":"function","z":"14572cfb.10d313","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":2084,"wires":[["f64560ad.61c7c"]]},{"id":"a5efbe2b.a4ad1","type":"debug","z":"14572cfb.10d313","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1260,"y":1584,"wires":[]},{"id":"b2e342f2.9cbef","type":"debug","z":"14572cfb.10d313","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":1384,"wires":[]},{"id":"43badcaa.289cd4","type":"debug","z":"14572cfb.10d313","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1140,"y":1880,"wires":[]},{"id":"cd0a7e78.da26b","type":"comment","z":"14572cfb.10d313","name":"Este elemento do vetor é bool e só fica true na virada do mês --->","info":"","x":330,"y":460,"wires":[]},{"id":"9605ffc4.47d0b","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":630,"y":320,"wires":[[]]},{"id":"55cca04b.e996c","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1150,"y":320,"wires":[[]]},{"id":"6794ec18.bbdf64","type":"modbus-read","z":"14572cfb.10d313","name":"fit102TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"206","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":201.0234375,"y":399.0390625,"wires":[["995924c2.a78fb8"],[]]},{"id":"92bcae04.7d70f","type":"modbus-read","z":"14572cfb.10d313","name":"fit103TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"210","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":620,"wires":[["16c48969.fbfa27"],[]]},{"id":"27fc6d69.06eaf2","type":"modbus-read","z":"14572cfb.10d313","name":"fit104TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"214","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":840,"wires":[["28c485db.5a3a1a"],[]]},{"id":"a591a736.42fdf8","type":"modbus-read","z":"14572cfb.10d313","name":"fit105TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"218","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":1060,"wires":[["7c175481.8e69ac"],[]]},{"id":"9776416b.be993","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":650,"y":540,"wires":[[]]},{"id":"77afd4bb.1f704c","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1170,"y":540,"wires":[[]]},{"id":"65fc8748.2f9cb8","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":630,"y":760,"wires":[[]]},{"id":"b9440192.f5b0b","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1150,"y":760,"wires":[[]]},{"id":"c5d5605.05b21a","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":610,"y":980,"wires":[[]]},{"id":"fe5b63c8.7584d","type":"file","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1130,"y":980,"wires":[[]]},{"id":"cf46ced.9d0403","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 223MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"223","quantity":"1","server":"e01ff31a.ec00c8","x":1410,"y":1320,"wires":[[],[]]},{"id":"a0700335.2bc59","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 232MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"232","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":1440,"wires":[[],[]]},{"id":"872b612d.73a4","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 233MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"233","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":1496,"wires":[[],[]]},{"id":"cace05db.601a88","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 242MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"242","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1640,"wires":[[],[]]},{"id":"e111c88.daac438","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 243MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"243","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1696,"wires":[[],[]]},{"id":"f40f7e61.abfb2","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 252MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"252","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1840,"wires":[[],[]]},{"id":"8e0edee8.93739","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 253MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"253","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1896,"wires":[[],[]]},{"id":"2ee7e8aa.9e0218","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 262MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"262","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":2020,"wires":[[],[]]},{"id":"f64560ad.61c7c","type":"modbus-write","z":"14572cfb.10d313","name":"MonthVolume parte alta 263MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"263","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":2076,"wires":[[],[]]},{"id":"a128569a.88d1d8","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual211.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":420,"y":860,"wires":[["151c7577.4dee5b"]]},{"id":"53df303.6cb9bd","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior211.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":410,"y":920,"wires":[["3d592b53.6ee294"]]},{"id":"a0ac4074.92153","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior212.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":370,"y":1080,"wires":[["c075f71d.2d9d68"]]},{"id":"2dcf4e2c.6b6222","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual212.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":380,"y":1020,"wires":[["e2457d0b.99db1"]]},{"id":"b269207e.62681","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAnterior213.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":350,"y":1300,"wires":[["1de5db56.3d24f5"]]},{"id":"1ce29f07.6c9ab1","type":"file in","z":"b17b4e3a.148a","name":"","filename":"nodeRedData/geracaoTotalGeralAteAnoAtual213.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":360,"y":1240,"wires":[["1a0aa61f.d56a9a"]]},{"id":"2d45408f.6583d","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":490,"y":1280,"wires":[["41df1d40.7d4514"]]},{"id":"c3b8be80.6e7e7","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":500,"y":1320,"wires":[["ea4d1ef7.fca25"]]},{"id":"1dc43e16.6076d2","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":1440,"wires":[["ca5ee6db.ed2568"]]},{"id":"59407c38.209d84","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":1480,"wires":[["ed9edeb7.b6a92"]]},{"id":"350680e3.d0baa","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":430,"y":1640,"wires":[["6152d07d.03662"]]},{"id":"9e812be5.f14108","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":440,"y":1680,"wires":[["37aa63b5.aa1cdc"]]},{"id":"fb4822a1.a4706","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":430,"y":1840,"wires":[["ecfba0e1.3b0d1"]]},{"id":"e5466501.3976c8","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":440,"y":1880,"wires":[["ac44d00e.66357"]]},{"id":"b1fa6160.36592","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAtual105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":2020,"wires":[["3da6b997.b3e926"]]},{"id":"6bcfde7f.7c10c","type":"file in","z":"14572cfb.10d313","name":"","filename":"nodeRedData/vazaoTotalGeralAteMesAnterior105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":2060,"wires":[["1eb2692c.67cbe7"]]},{"id":"f0171076.16df1","type":"comment","z":"b5fc5ce6.34461","name":"ENDEREÇOS","info":"LOCALIZAÇÃO DOS MEDIDORES\nFIT101 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO A\nFIT102 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO B\nFIT103 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO C\nFIT104 - ENTRADA DE AǴUA PARA A GUARITA\nFIT105 - ENTRADA DE ÁGUA PARA O TRANQUE DE ARMAZENAMENTO DA ESTAÇÃO DE TRATAMENTO DE ÁGUA \n\nflow = vazão instantânea\nvolume = vazão totalizada\n\n200 - vazão instantânea em m3/h do FIT101 parte alta\n201 - vazão instantânea em m3/h do FIT101 parte baixa\n202 - vazão totalizada em m3 do FIT101 parte alta\n203 - vazão totalizada em m3 do FIT101 parte baixa\n204 - vazão instantânea em m3/h do FIT102 parte alta\n205 - vazão instantânea em m3/h do FIT102 parte baixa\n206 - vazão totalizada em m3 do FIT102 parte alta\n207 - vazão totalizada em m3 do FIT102 parte baixa\n208 - vazão instantânea em m3/h do FIT103 parte alta\n209 - vazão instantânea em m3/h do FIT103 parte baixa\n210 - vazão totalizada em m3 do FIT103 parte alta\n211 - vazão totalizada em m3 do FIT103 parte baixa\n212 - vazão instantânea em m3/h do FIT104 parte alta\n213 - vazão instantânea em m3/h do FIT104 parte baixa\n214 - vazão totalizada em m3 do FIT104 parte alta\n215 - vazão totalizada em m3 do FIT104 parte baixa\n216 - vazão instantânea em m3/h do FIT105 parte alta\n217 - vazão instantânea em m3/h do FIT105 parte baixa\n218 - vazão totalizada em m3 do FIT105 parte alta\n219 - vazão totalizada em m3 do FIT105 parte baixa\n\n\nVAZÃO TOTALIZADA DIA, MÊS E ANO DOS MEDIDORES DE VAZÃO - NODE-RED\n#220 ~ 269\n\n220 DAY_VOLUME parte alta em m3 FIT101\n221 DAY_VOLUME parte baixa em m3  FIT101\n222 MONTH_VOLUME parte alta em m3  FIT101\n223 MONTH_VOLUME parte baixa em m3  FIT101\n224 YEAR_VOLUME parte alta em m3  FIT101\n225 YEAR_VOLUME parte baixa em m3  FIT101\nTOTAL_VOLUME nos endereços originais  FIT101 MB 202 203\n230 DAY_VOLUME parte alta em m3 FIT102\n231 DAY_VOLUME parte baixa em m3  FIT102\n232 MONTH_VOLUME parte alta em m3  FIT102\n233 MONTH_VOLUME parte baixa em m3  FIT102\n234 YEAR_VOLUME parte alta em m3  FIT102\n235 YEAR_VOLUME parte baixa em m3  FIT102\nTOTAL_VOLUME nos endereços originais  FIT102 MB 206 207\n240 DAY_VOLUME parte alta em m3 FIT103\n241 DAY_VOLUME parte baixa em m3  FIT103\n242 MONTH_VOLUME parte alta em m3  FIT103\n243 MONTH_VOLUME parte baixa em m3  FIT103\n244 YEAR_VOLUME parte alta em m3  FIT103\n245 YEAR_VOLUME parte baixa em m3  FIT103\nTOTAL_VOLUME nos endereços originais  FIT103 MB 210 211\n250 DAY_VOLUME parte alta em m3 FIT104\n251 DAY_VOLUME parte baixa em m3  FIT104\n252 MONTH_VOLUME parte alta em m3  FIT104\n253 MONTH_VOLUME parte baixa em m3  FIT104\n254 YEAR_VOLUME parte alta em m3  FIT104\n255 YEAR_VOLUME parte baixa em m3  FIT104\nTOTAL_VOLUME nos endereços originais  FIT104 MB 214 215\n260 DAY_VOLUME parte alta em m3 FIT105\n261 DAY_VOLUME parte baixa em m3  FIT105\n262 MONTH_VOLUME parte alta em m3  FIT105\n263 MONTH_VOLUME parte baixa em m3  FIT105\n264 YEAR_VOLUME parte alta em m3  FIT105\n265 YEAR_VOLUME parte baixa em m3  FIT105\nTOTAL_VOLUME nos endereços originais  FIT105 MB 218 219\n","x":130,"y":140,"wires":[]},{"id":"3512c1fa.9eb17e","type":"inject","z":"b5fc5ce6.34461","name":"Force","topic":"","payload":"","payloadType":"date","repeat":"300","crontab":"","once":false,"onceDelay":"","x":80,"y":1620,"wires":[["bece0374.b6848","5113af6d.cb102","7ab20fb7.6f18a","3645d50a.bc6dca","8b789eb6.dc75f","e60ed4d9.774558","54b20162.cf0af","de123ae6.8e75f8","3bb1971b.4f8598","2061e8a3.30de08","9695bf7c.548e5"]]},{"id":"c823321a.84df","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":660,"y":180,"wires":[[]]},{"id":"ccd79a63.ff56b8","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1180,"y":180,"wires":[[]]},{"id":"bece0374.b6848","type":"function","z":"b5fc5ce6.34461","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t'day':\t\tdt.getDate(),\n\t//'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes()//,\n\t//'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":1300,"wires":[["f36b5302.f27b1"]]},{"id":"f36b5302.f27b1","type":"function","z":"b5fc5ce6.34461","name":"payloadDay","func":"msg.payload = msg.day;\n//msg.payload = msg.mins;\n//msg.payload = msg.hours;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":1300,"wires":[["1683e0b7.36a86f"]]},{"id":"1683e0b7.36a86f","type":"function","z":"b5fc5ce6.34461","name":"detectaTrocaDia","func":"//var count=context.get('count') || 0;\nvar anterior=flow.get('anterior') || 0;\nvar atual=msg.payload;\n//count +=1;\n//msg.payload=\"F5 \"+msg.payload+\" \"+count;\n//msg.payload=msg.payload;\nif ( anterior == atual ) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nflow.set('anterior',atual);\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":1300,"wires":[["e129e30.25bbf2","5e972bf2.eede44","b211aa3a.57b0c8","47800560.57e3cc","7d15991d.5a1c28"]]},{"id":"6d6bc911.98a4d8","type":"modbus-read","z":"b5fc5ce6.34461","name":"fit101TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"202","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":180,"y":240,"wires":[["f0e1a116.22891"],[]]},{"id":"f0e1a116.22891","type":"function","z":"b5fc5ce6.34461","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":232,"wires":[["a881e5d3.2d6698","c823321a.84df"]]},{"id":"b10a9059.5062b","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":280,"wires":[["66fb0581.695f5c"]]},{"id":"a881e5d3.2d6698","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":260,"wires":[["b10a9059.5062b"]]},{"id":"e129e30.25bbf2","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":300,"wires":[["b10a9059.5062b"]]},{"id":"66fb0581.695f5c","type":"function","z":"b5fc5ce6.34461","name":"valorParaTotalAtéDiaAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":970,"y":223,"wires":[["ccd79a63.ff56b8"]]},{"id":"bed9f5ac.a1dad8","type":"function","z":"b5fc5ce6.34461","name":"geracaoDiaAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1110,"y":1284,"wires":[["7a7176bf.8eb328","b83c5ef1.03fec"]]},{"id":"6e35d16c.c0652","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":990,"y":1344,"wires":[["bed9f5ac.a1dad8"]]},{"id":"a43b8aea.0b50f8","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1340,"wires":[["6e35d16c.c0652"]]},{"id":"de5eee28.c3421","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1380,"wires":[["6e35d16c.c0652"]]},{"id":"9fe6a3cb.680d7","type":"comment","z":"b5fc5ce6.34461","name":"trocar para dia","info":"","x":550,"y":1260,"wires":[]},{"id":"ba1355f7.9c5e78","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 220MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"220","quantity":"1","server":"e01ff31a.ec00c8","x":1420,"y":1344,"wires":[[],[]]},{"id":"7a7176bf.8eb328","type":"function","z":"b5fc5ce6.34461","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1344,"wires":[["ba1355f7.9c5e78"]]},{"id":"b83c5ef1.03fec","type":"function","z":"b5fc5ce6.34461","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":1404,"wires":[["21b6fd38.321ca2"]]},{"id":"8d24dc9f.4606d","type":"comment","z":"b5fc5ce6.34461","name":"Só armazana se houver troca do dia","info":"","x":950,"y":120,"wires":[]},{"id":"9641fb47.1c8508","type":"comment","z":"b5fc5ce6.34461","name":"calcula a diferença entre total mês anterior e corrente","info":"","x":1170,"y":1244,"wires":[]},{"id":"412ac339.55222c","type":"function","z":"b5fc5ce6.34461","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":472,"wires":[["64678965.453928","b0f90552.a74a78"]]},{"id":"9719f13a.8f757","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":520,"wires":[["e075be64.182c3"]]},{"id":"64678965.453928","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":500,"wires":[["9719f13a.8f757"]]},{"id":"7d15991d.5a1c28","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":540,"wires":[["9719f13a.8f757"]]},{"id":"d0cbc1d4.e829d","type":"function","z":"b5fc5ce6.34461","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":692,"wires":[["c6d5071.fbc8bf8","6ad41195.634b"]]},{"id":"e42290e0.feb8b","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":740,"wires":[["80f6d156.05535"]]},{"id":"c6d5071.fbc8bf8","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":720,"wires":[["e42290e0.feb8b"]]},{"id":"47800560.57e3cc","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":760,"wires":[["e42290e0.feb8b"]]},{"id":"bf79a477.b36ce8","type":"function","z":"b5fc5ce6.34461","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":912,"wires":[["ec0e6a20.ed7f58","2cf89138.3c8b2e"]]},{"id":"431b7695.e23b98","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":960,"wires":[["f66a8b44.224068"]]},{"id":"ec0e6a20.ed7f58","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":940,"wires":[["431b7695.e23b98"]]},{"id":"b211aa3a.57b0c8","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":980,"wires":[["431b7695.e23b98"]]},{"id":"68b3393a.d4c638","type":"function","z":"b5fc5ce6.34461","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1140,"wires":[["45a119f.00e23e8","9ed1f98.42b5608"]]},{"id":"a3ebd30a.f1001","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1180,"wires":[["1fb35a7b.7416c6"]]},{"id":"45a119f.00e23e8","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1160,"wires":[["a3ebd30a.f1001"]]},{"id":"5e972bf2.eede44","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1200,"wires":[["a3ebd30a.f1001"]]},{"id":"914a2b04.7c0938","type":"function","z":"b5fc5ce6.34461","name":"geracaoDiaAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":1464,"wires":[["30583d8c.696232","eb2092c6.2f2d9"]]},{"id":"d6da9fb3.c6f86","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":1524,"wires":[["914a2b04.7c0938"]]},{"id":"4de15615.95a158","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1520,"wires":[["d6da9fb3.c6f86"]]},{"id":"b875cc46.e41b","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":1560,"wires":[["d6da9fb3.c6f86"]]},{"id":"30583d8c.696232","type":"function","z":"b5fc5ce6.34461","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":1524,"wires":[["9f948b8f.3d4408"]]},{"id":"eb2092c6.2f2d9","type":"function","z":"b5fc5ce6.34461","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":1584,"wires":[["e03c1ebc.5c324"]]},{"id":"e1f69875.3abed8","type":"function","z":"b5fc5ce6.34461","name":"geracaoDiaAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1664,"wires":[["e795fb40.ca9ff8","2f5ba43a.1f8f4c"]]},{"id":"a5ded95e.6bce98","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1724,"wires":[["e1f69875.3abed8"]]},{"id":"93a5f1af.877f8","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1720,"wires":[["a5ded95e.6bce98"]]},{"id":"d46933c4.4f972","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1760,"wires":[["a5ded95e.6bce98"]]},{"id":"e795fb40.ca9ff8","type":"function","z":"b5fc5ce6.34461","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1724,"wires":[["914cc5de.379138"]]},{"id":"2f5ba43a.1f8f4c","type":"function","z":"b5fc5ce6.34461","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1784,"wires":[["7090dc04.4fef14"]]},{"id":"666fe55d.dd4cac","type":"debug","z":"b5fc5ce6.34461","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1260,"y":1864,"wires":[]},{"id":"82a94b97.b7b398","type":"function","z":"b5fc5ce6.34461","name":"geracaoDiaAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1864,"wires":[["f1535a41.597118","6aa76d3b.9569c4"]]},{"id":"f76729cf.a768c8","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1924,"wires":[["82a94b97.b7b398"]]},{"id":"d78214c8.8eb678","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1920,"wires":[["f76729cf.a768c8"]]},{"id":"674444e.1c5dcbc","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1960,"wires":[["f76729cf.a768c8"]]},{"id":"f1535a41.597118","type":"function","z":"b5fc5ce6.34461","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1924,"wires":[["4a5e6957.b9a288"]]},{"id":"6aa76d3b.9569c4","type":"function","z":"b5fc5ce6.34461","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1984,"wires":[["5d4692cf.b32f3c"]]},{"id":"de39b2d.21dfc5","type":"debug","z":"b5fc5ce6.34461","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":2044,"wires":[]},{"id":"5f1ef271.55508c","type":"function","z":"b5fc5ce6.34461","name":"geracaoDiaAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":2044,"wires":[["707e40a3.059ff","84b3da79.d976d8"]]},{"id":"e8b14574.af5938","type":"join","z":"b5fc5ce6.34461","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":2104,"wires":[["5f1ef271.55508c"]]},{"id":"e9278cbd.27991","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2100,"wires":[["e8b14574.af5938"]]},{"id":"c862d394.1fd28","type":"change","z":"b5fc5ce6.34461","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2140,"wires":[["e8b14574.af5938"]]},{"id":"707e40a3.059ff","type":"function","z":"b5fc5ce6.34461","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":2104,"wires":[["1748d801.890728"]]},{"id":"84b3da79.d976d8","type":"function","z":"b5fc5ce6.34461","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":2164,"wires":[["f0d51575.c62058"]]},{"id":"a0f726a8.d49538","type":"debug","z":"b5fc5ce6.34461","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1260,"y":1664,"wires":[]},{"id":"f84fefb8.1db2d","type":"debug","z":"b5fc5ce6.34461","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":1464,"wires":[]},{"id":"f19a4352.53b2","type":"debug","z":"b5fc5ce6.34461","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1320,"y":1284,"wires":[]},{"id":"1f21482e.ca9ed8","type":"comment","z":"b5fc5ce6.34461","name":"Este elemento do vetor é bool e só fica true na virada do dia -->","info":"","x":330,"y":540,"wires":[]},{"id":"6f3acd1d.8ffd84","type":"modbus-read","z":"b5fc5ce6.34461","name":"fit102TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"206","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":201.0234375,"y":479.0390625,"wires":[["412ac339.55222c"],[]]},{"id":"93b20d81.e273e","type":"modbus-read","z":"b5fc5ce6.34461","name":"fit103TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"210","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":700,"wires":[["d0cbc1d4.e829d"],[]]},{"id":"975a8ed8.0d05c","type":"modbus-read","z":"b5fc5ce6.34461","name":"fit104TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"214","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":920,"wires":[["bf79a477.b36ce8"],[]]},{"id":"e8f333d8.4e728","type":"modbus-read","z":"b5fc5ce6.34461","name":"fit105TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"218","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":1140,"wires":[["68b3393a.d4c638"],[]]},{"id":"21b6fd38.321ca2","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 221MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"221","quantity":"1","server":"e01ff31a.ec00c8","x":1410,"y":1400,"wires":[[],[]]},{"id":"9f948b8f.3d4408","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 230MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"230","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":1520,"wires":[[],[]]},{"id":"e03c1ebc.5c324","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 231MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"231","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":1576,"wires":[[],[]]},{"id":"914cc5de.379138","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 240MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"240","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1720,"wires":[[],[]]},{"id":"7090dc04.4fef14","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 241MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"241","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1776,"wires":[[],[]]},{"id":"4a5e6957.b9a288","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 250MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"250","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1920,"wires":[[],[]]},{"id":"5d4692cf.b32f3c","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 251MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"251","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1976,"wires":[[],[]]},{"id":"1748d801.890728","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 260MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"260","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":2100,"wires":[[],[]]},{"id":"f0d51575.c62058","type":"modbus-write","z":"b5fc5ce6.34461","name":"MonthVolume parte alta 261MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"261","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":2156,"wires":[[],[]]},{"id":"5113af6d.cb102","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":490,"y":1360,"wires":[["a43b8aea.0b50f8"]]},{"id":"7ab20fb7.6f18a","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":500,"y":1400,"wires":[["de5eee28.c3421"]]},{"id":"3f0be64e.4230fa","type":"comment","z":"b5fc5ce6.34461","name":"Só armazana se houver troca do dia","info":"","x":960,"y":340,"wires":[]},{"id":"f53f31df.c58d6","type":"comment","z":"b5fc5ce6.34461","name":"Só armazana se houver troca do dia","info":"","x":980,"y":580,"wires":[]},{"id":"a00f8cc2.c22c3","type":"comment","z":"b5fc5ce6.34461","name":"Só armazana se houver troca do dia","info":"","x":1000,"y":780,"wires":[]},{"id":"c4be4400.4e3d98","type":"comment","z":"b5fc5ce6.34461","name":"Só armazana se houver troca do dia","info":"","x":980,"y":1000,"wires":[]},{"id":"b0f90552.a74a78","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":570,"y":400,"wires":[[]]},{"id":"104a4b16.1978d5","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1090,"y":400,"wires":[[]]},{"id":"6ad41195.634b","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":590,"y":640,"wires":[[]]},{"id":"be43ee3.e8ce21","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1110,"y":640,"wires":[[]]},{"id":"2cf89138.3c8b2e","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":670,"y":820,"wires":[[]]},{"id":"eeb3befd.d7f0e","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1190,"y":820,"wires":[[]]},{"id":"9ed1f98.42b5608","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":630,"y":1060,"wires":[[]]},{"id":"67dc3c3.3fa43c4","type":"file","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1150,"y":1060,"wires":[[]]},{"id":"e075be64.182c3","type":"function","z":"b5fc5ce6.34461","name":"valorParaTotalAtéDiaAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1060,"y":520,"wires":[["104a4b16.1978d5"]]},{"id":"80f6d156.05535","type":"function","z":"b5fc5ce6.34461","name":"valorParaTotalAtéDiaAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1060,"y":720,"wires":[["be43ee3.e8ce21"]]},{"id":"f66a8b44.224068","type":"function","z":"b5fc5ce6.34461","name":"valorParaTotalAtéDiaAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1060,"y":920,"wires":[["eeb3befd.d7f0e"]]},{"id":"1fb35a7b.7416c6","type":"function","z":"b5fc5ce6.34461","name":"valorParaTotalAtéDiaAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1060,"y":1140,"wires":[["67dc3c3.3fa43c4"]]},{"id":"2061e8a3.30de08","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":1520,"wires":[["4de15615.95a158"]]},{"id":"9695bf7c.548e5","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":1560,"wires":[["b875cc46.e41b"]]},{"id":"3bb1971b.4f8598","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":410,"y":1720,"wires":[["93a5f1af.877f8"]]},{"id":"de123ae6.8e75f8","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":420,"y":1760,"wires":[["d46933c4.4f972"]]},{"id":"54b20162.cf0af","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":430,"y":1920,"wires":[["d78214c8.8eb678"]]},{"id":"e60ed4d9.774558","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":440,"y":1960,"wires":[["674444e.1c5dcbc"]]},{"id":"3645d50a.bc6dca","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAtual105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":2100,"wires":[["e9278cbd.27991"]]},{"id":"8b789eb6.dc75f","type":"file in","z":"b5fc5ce6.34461","name":"","filename":"nodeRedData/vazaoTotalGeralAteDiaAnterior105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":2140,"wires":[["c862d394.1fd28"]]},{"id":"affade13.dc3e","type":"comment","z":"bcc9ccbb.41377","name":"ENDEREÇOS","info":"LOCALIZAÇÃO DOS MEDIDORES\nFIT101 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO A\nFIT102 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO B\nFIT103 - SAÍDA DA CAIXA DE ÁGUA LOCALIZADA SOBRE O BLOCO C\nFIT104 - ENTRADA DE AǴUA PARA A GUARITA\nFIT105 - ENTRADA DE ÁGUA PARA O TRANQUE DE ARMAZENAMENTO DA ESTAÇÃO DE TRATAMENTO DE ÁGUA \n\nflow = vazão instantânea\nvolume = vazão totalizada\n\n200 - vazão instantânea em m3/h do FIT101 parte alta\n201 - vazão instantânea em m3/h do FIT101 parte baixa\n202 - vazão totalizada em m3 do FIT101 parte alta\n203 - vazão totalizada em m3 do FIT101 parte baixa\n204 - vazão instantânea em m3/h do FIT102 parte alta\n205 - vazão instantânea em m3/h do FIT102 parte baixa\n206 - vazão totalizada em m3 do FIT102 parte alta\n207 - vazão totalizada em m3 do FIT102 parte baixa\n208 - vazão instantânea em m3/h do FIT103 parte alta\n209 - vazão instantânea em m3/h do FIT103 parte baixa\n210 - vazão totalizada em m3 do FIT103 parte alta\n211 - vazão totalizada em m3 do FIT103 parte baixa\n212 - vazão instantânea em m3/h do FIT104 parte alta\n213 - vazão instantânea em m3/h do FIT104 parte baixa\n214 - vazão totalizada em m3 do FIT104 parte alta\n215 - vazão totalizada em m3 do FIT104 parte baixa\n216 - vazão instantânea em m3/h do FIT105 parte alta\n217 - vazão instantânea em m3/h do FIT105 parte baixa\n218 - vazão totalizada em m3 do FIT105 parte alta\n219 - vazão totalizada em m3 do FIT105 parte baixa\n\n\nVAZÃO TOTALIZADA DIA, MÊS E ANO DOS MEDIDORES DE VAZÃO - NODE-RED\n#220 ~ 269\n\n220 DAY_VOLUME parte alta em m3 FIT101\n221 DAY_VOLUME parte baixa em m3  FIT101\n222 MONTH_VOLUME parte alta em m3  FIT101\n223 MONTH_VOLUME parte baixa em m3  FIT101\n224 YEAR_VOLUME parte alta em m3  FIT101\n225 YEAR_VOLUME parte baixa em m3  FIT101\nTOTAL_VOLUME nos endereços originais  FIT101 MB 202 203\n230 DAY_VOLUME parte alta em m3 FIT102\n231 DAY_VOLUME parte baixa em m3  FIT102\n232 MONTH_VOLUME parte alta em m3  FIT102\n233 MONTH_VOLUME parte baixa em m3  FIT102\n234 YEAR_VOLUME parte alta em m3  FIT102\n235 YEAR_VOLUME parte baixa em m3  FIT102\nTOTAL_VOLUME nos endereços originais  FIT102 MB 206 207\n240 DAY_VOLUME parte alta em m3 FIT103\n241 DAY_VOLUME parte baixa em m3  FIT103\n242 MONTH_VOLUME parte alta em m3  FIT103\n243 MONTH_VOLUME parte baixa em m3  FIT103\n244 YEAR_VOLUME parte alta em m3  FIT103\n245 YEAR_VOLUME parte baixa em m3  FIT103\nTOTAL_VOLUME nos endereços originais  FIT103 MB 210 211\n250 DAY_VOLUME parte alta em m3 FIT104\n251 DAY_VOLUME parte baixa em m3  FIT104\n252 MONTH_VOLUME parte alta em m3  FIT104\n253 MONTH_VOLUME parte baixa em m3  FIT104\n254 YEAR_VOLUME parte alta em m3  FIT104\n255 YEAR_VOLUME parte baixa em m3  FIT104\nTOTAL_VOLUME nos endereços originais  FIT104 MB 214 215\n260 DAY_VOLUME parte alta em m3 FIT105\n261 DAY_VOLUME parte baixa em m3  FIT105\n262 MONTH_VOLUME parte alta em m3  FIT105\n263 MONTH_VOLUME parte baixa em m3  FIT105\n264 YEAR_VOLUME parte alta em m3  FIT105\n265 YEAR_VOLUME parte baixa em m3  FIT105\nTOTAL_VOLUME nos endereços originais  FIT105 MB 218 219\n","x":130,"y":100,"wires":[]},{"id":"66c69b2e.13b714","type":"inject","z":"bcc9ccbb.41377","name":"Force","topic":"","payload":"","payloadType":"date","repeat":"300","crontab":"","once":false,"onceDelay":"","x":120,"y":1540,"wires":[["4faef1b2.caeb7","6bc82be1.42b4c4","5f72a853.a879e8","286242ed.e0c05e","8a7d8747.1fc798","b6f90b29.93dde8","fa8e45c8.b2e118","9972c5aa.71e7c8","cd159d5e.05442","ca4ebd3c.8950d","6dae68d6.7ce7e8"]]},{"id":"d9ddfe21.e9e13","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":660,"y":140,"wires":[[]]},{"id":"4f7e09e1.7ae898","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior101.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1180,"y":140,"wires":[[]]},{"id":"4faef1b2.caeb7","type":"function","z":"bcc9ccbb.41377","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t//'day':\t\tdt.getDate(),\n\t'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes()//,\n\t//'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":1260,"wires":[["14fdd229.45562e"]]},{"id":"14fdd229.45562e","type":"function","z":"bcc9ccbb.41377","name":"payloadYear","func":"msg.payload = msg.year;\n//msg.payload = msg.mins;\n//msg.payload = msg.hours;\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":1260,"wires":[["25b91efe.ae6872"]]},{"id":"25b91efe.ae6872","type":"function","z":"bcc9ccbb.41377","name":"detectaTrocaAno","func":"//var count=context.get('count') || 0;\nvar anterior=flow.get('anterior') || 0;\nvar atual=msg.payload;\n//count +=1;\n//msg.payload=\"F5 \"+msg.payload+\" \"+count;\n//msg.payload=msg.payload;\nif ( anterior == atual ) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nflow.set('anterior',atual);\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1260,"wires":[["53a9c189.6ab3b","ea9d56e3.a43758","d709ef3.7e54e1","5b1402bc.99808c","ac60dfe.8b4cd2"]]},{"id":"5585d2ca.2c878c","type":"modbus-read","z":"bcc9ccbb.41377","name":"fit101TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"202","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":180,"y":200,"wires":[["94b8d7c9.738f08"],[]]},{"id":"94b8d7c9.738f08","type":"function","z":"bcc9ccbb.41377","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":192,"wires":[["35a2d007.672dd","d9ddfe21.e9e13"]]},{"id":"a25474c7.2fce78","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":240,"wires":[["aeaa7b91.940798"]]},{"id":"35a2d007.672dd","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":220,"wires":[["a25474c7.2fce78"]]},{"id":"53a9c189.6ab3b","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":260,"wires":[["a25474c7.2fce78"]]},{"id":"aeaa7b91.940798","type":"function","z":"bcc9ccbb.41377","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":980,"y":183,"wires":[["4f7e09e1.7ae898"]]},{"id":"b332909c.af75c","type":"function","z":"bcc9ccbb.41377","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1110,"y":1244,"wires":[["30a7e8cc.01ef78","51aa3f70.a59cb"]]},{"id":"c1be01b8.8c0aa","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":990,"y":1304,"wires":[["b332909c.af75c"]]},{"id":"3f998c9a.eab004","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1300,"wires":[["c1be01b8.8c0aa"]]},{"id":"a9500caf.46ad1","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1340,"wires":[["c1be01b8.8c0aa"]]},{"id":"83c88e2a.7ec21","type":"comment","z":"bcc9ccbb.41377","name":"trocar para ano","info":"","x":560,"y":1220,"wires":[]},{"id":"d6f607f9.062a18","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 224MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"224","quantity":"1","server":"e01ff31a.ec00c8","x":1420,"y":1304,"wires":[[],[]]},{"id":"30a7e8cc.01ef78","type":"function","z":"bcc9ccbb.41377","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1304,"wires":[["d6f607f9.062a18"]]},{"id":"51aa3f70.a59cb","type":"function","z":"bcc9ccbb.41377","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":1364,"wires":[["b0232e2e.0f89"]]},{"id":"a2bb4587.ca8a18","type":"comment","z":"bcc9ccbb.41377","name":"Só armazana se houver troca do ano","info":"","x":960,"y":80,"wires":[]},{"id":"fd74f81c.ce81a8","type":"comment","z":"bcc9ccbb.41377","name":"calcula a diferença entre total ano anterior e corrente","info":"","x":1160,"y":1204,"wires":[]},{"id":"fba44adb.75d728","type":"function","z":"bcc9ccbb.41377","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":432,"wires":[["2a8ea020.27bf5","6d9091cb.ac71c"]]},{"id":"de83de9c.c0ad","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":480,"wires":[["ae3763cf.20434"]]},{"id":"2a8ea020.27bf5","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":460,"wires":[["de83de9c.c0ad"]]},{"id":"ac60dfe.8b4cd2","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":500,"wires":[["de83de9c.c0ad"]]},{"id":"59ceee9d.50681","type":"function","z":"bcc9ccbb.41377","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":652,"wires":[["994dfebe.a83e5","9991c7d6.e3fa08"]]},{"id":"9fa3b51c.ef7af8","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":700,"wires":[["4050e1cc.61312"]]},{"id":"994dfebe.a83e5","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":680,"wires":[["9fa3b51c.ef7af8"]]},{"id":"5b1402bc.99808c","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":720,"wires":[["9fa3b51c.ef7af8"]]},{"id":"c01eaa00.72d4e8","type":"function","z":"bcc9ccbb.41377","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":872,"wires":[["8b932338.f44e3","64ded87d.4b6f28"]]},{"id":"3db6bd20.928fa2","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":920,"wires":[["358ef539.5bd54a"]]},{"id":"8b932338.f44e3","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":900,"wires":[["3db6bd20.928fa2"]]},{"id":"d709ef3.7e54e1","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":940,"wires":[["3db6bd20.928fa2"]]},{"id":"6b6fdbf7.fcc754","type":"function","z":"bcc9ccbb.41377","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1100,"wires":[["12f37be1.58c3c4","fdc510f.15736f"]]},{"id":"89a90af0.d538b8","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1140,"wires":[["ace4df6f.1f676"]]},{"id":"12f37be1.58c3c4","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1120,"wires":[["89a90af0.d538b8"]]},{"id":"ea9d56e3.a43758","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1160,"wires":[["89a90af0.d538b8"]]},{"id":"a3761b60.568cb8","type":"function","z":"bcc9ccbb.41377","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":1424,"wires":[["91bb2e84.13fca","96e44214.38ce"]]},{"id":"d903b4aa.0f7618","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":1484,"wires":[["a3761b60.568cb8"]]},{"id":"ded16749.6b19f8","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1480,"wires":[["d903b4aa.0f7618"]]},{"id":"eb8fa13.c59b56","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1520,"wires":[["d903b4aa.0f7618"]]},{"id":"91bb2e84.13fca","type":"function","z":"bcc9ccbb.41377","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":1484,"wires":[["83fdae5b.354c5"]]},{"id":"96e44214.38ce","type":"function","z":"bcc9ccbb.41377","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":1544,"wires":[["90657147.e76c8"]]},{"id":"83fa2309.c69e","type":"function","z":"bcc9ccbb.41377","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1624,"wires":[["4e25d9a2.ee3488","865469a0.37f428"]]},{"id":"ccfb57b3.fd7ca8","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1684,"wires":[["83fa2309.c69e"]]},{"id":"98950baf.901c38","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1680,"wires":[["ccfb57b3.fd7ca8"]]},{"id":"7aeb0a8.79de9f4","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1720,"wires":[["ccfb57b3.fd7ca8"]]},{"id":"4e25d9a2.ee3488","type":"function","z":"bcc9ccbb.41377","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1684,"wires":[["37910848.dc2c68"]]},{"id":"865469a0.37f428","type":"function","z":"bcc9ccbb.41377","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1744,"wires":[["6ca30397.41afcc"]]},{"id":"61039953.839748","type":"debug","z":"bcc9ccbb.41377","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1260,"y":1824,"wires":[]},{"id":"8b7f86d8.c48bb8","type":"function","z":"bcc9ccbb.41377","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1050,"y":1824,"wires":[["93642bfd.2351c8","d5947a16.289078"]]},{"id":"6f58370a.d962f8","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1884,"wires":[["8b7f86d8.c48bb8"]]},{"id":"21306b8b.0e2034","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1880,"wires":[["6f58370a.d962f8"]]},{"id":"4c0f2c05.82a044","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1920,"wires":[["6f58370a.d962f8"]]},{"id":"93642bfd.2351c8","type":"function","z":"bcc9ccbb.41377","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1884,"wires":[["3511e6dd.126f1a"]]},{"id":"d5947a16.289078","type":"function","z":"bcc9ccbb.41377","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":1944,"wires":[["d543fb1a.0d2108"]]},{"id":"763ddc62.251fa4","type":"debug","z":"bcc9ccbb.41377","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":2004,"wires":[]},{"id":"45b0dfcc.eca","type":"function","z":"bcc9ccbb.41377","name":"geracaoAnoAtual","func":"msg.payload = ((msg.payload[0] - msg.payload[1]) ** 2) ** 0.5;\n//if (msg.paylod != 0)\n\nif (typeof msg.payload == \"number\") {\n    return msg;\n}","outputs":1,"noerr":0,"x":1070,"y":2004,"wires":[["f080f513.7d7ac8","fda830e1.92046"]]},{"id":"e13cd9a5.824ad8","type":"join","z":"bcc9ccbb.41377","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":2064,"wires":[["45b0dfcc.eca"]]},{"id":"4d96141.a5913ec","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2060,"wires":[["e13cd9a5.824ad8"]]},{"id":"7def5530.974eec","type":"change","z":"bcc9ccbb.41377","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":2100,"wires":[["e13cd9a5.824ad8"]]},{"id":"f080f513.7d7ac8","type":"function","z":"bcc9ccbb.41377","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":2064,"wires":[["86a616ce.625008"]]},{"id":"fda830e1.92046","type":"function","z":"bcc9ccbb.41377","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1090,"y":2124,"wires":[["1d394e9e.9bdbe1"]]},{"id":"45beb891.e738d8","type":"debug","z":"bcc9ccbb.41377","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1260,"y":1624,"wires":[]},{"id":"907ff451.41c078","type":"debug","z":"bcc9ccbb.41377","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1280,"y":1424,"wires":[]},{"id":"c564c221.86638","type":"debug","z":"bcc9ccbb.41377","name":"output2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1320,"y":1244,"wires":[]},{"id":"b755b3c4.e6086","type":"comment","z":"bcc9ccbb.41377","name":"Este elemento do vetor é bool e só fica true na virada do mês --->","info":"","x":330,"y":500,"wires":[]},{"id":"c11a840d.a96e88","type":"modbus-read","z":"bcc9ccbb.41377","name":"fit102TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"206","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":201.0234375,"y":439.0390625,"wires":[["fba44adb.75d728"],[]]},{"id":"ef949e9a.2c3d7","type":"modbus-read","z":"bcc9ccbb.41377","name":"fit103TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"210","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":660,"wires":[["59ceee9d.50681"],[]]},{"id":"8259895a.2cafd8","type":"modbus-read","z":"bcc9ccbb.41377","name":"fit104TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"214","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":880,"wires":[["c01eaa00.72d4e8"],[]]},{"id":"10eb7cfb.3bd073","type":"modbus-read","z":"bcc9ccbb.41377","name":"fit105TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"218","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":1100,"wires":[["6b6fdbf7.fcc754"],[]]},{"id":"b0232e2e.0f89","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 225MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"225","quantity":"1","server":"e01ff31a.ec00c8","x":1410,"y":1360,"wires":[[],[]]},{"id":"83fdae5b.354c5","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 234MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"234","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":1480,"wires":[[],[]]},{"id":"90657147.e76c8","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 235MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"235","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":1536,"wires":[[],[]]},{"id":"37910848.dc2c68","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 244MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"244","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1680,"wires":[[],[]]},{"id":"6ca30397.41afcc","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 245MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"245","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1736,"wires":[[],[]]},{"id":"3511e6dd.126f1a","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 254MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"254","quantity":"1","server":"e01ff31a.ec00c8","x":1370,"y":1880,"wires":[[],[]]},{"id":"d543fb1a.0d2108","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 255MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"255","quantity":"1","server":"e01ff31a.ec00c8","x":1360,"y":1936,"wires":[[],[]]},{"id":"86a616ce.625008","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 264MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"264","quantity":"1","server":"e01ff31a.ec00c8","x":1390,"y":2060,"wires":[[],[]]},{"id":"1d394e9e.9bdbe1","type":"modbus-write","z":"bcc9ccbb.41377","name":"MonthVolume parte alta 265MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"265","quantity":"1","server":"e01ff31a.ec00c8","x":1380,"y":2116,"wires":[[],[]]},{"id":"6bc82be1.42b4c4","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":490,"y":1320,"wires":[["3f998c9a.eab004"]]},{"id":"5f72a853.a879e8","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior101.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":500,"y":1360,"wires":[["a9500caf.46ad1"]]},{"id":"1ed39f27.7b0a01","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1160,"y":380,"wires":[[]]},{"id":"ae3763cf.20434","type":"function","z":"bcc9ccbb.41377","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":960,"y":423,"wires":[["1ed39f27.7b0a01"]]},{"id":"262ab72e.75fc78","type":"comment","z":"bcc9ccbb.41377","name":"Só armazana se houver troca do ano","info":"","x":940,"y":320,"wires":[]},{"id":"6d9091cb.ac71c","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual102.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":640,"y":380,"wires":[[]]},{"id":"27077990.fa2146","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1200,"y":600,"wires":[[]]},{"id":"4050e1cc.61312","type":"function","z":"bcc9ccbb.41377","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1000,"y":643,"wires":[["27077990.fa2146"]]},{"id":"32ffdaac.1de2b6","type":"comment","z":"bcc9ccbb.41377","name":"Só armazana se houver troca do ano","info":"","x":980,"y":540,"wires":[]},{"id":"9991c7d6.e3fa08","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual103.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":680,"y":600,"wires":[[]]},{"id":"d7052c60.d84a2","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1240,"y":820,"wires":[[]]},{"id":"358ef539.5bd54a","type":"function","z":"bcc9ccbb.41377","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1040,"y":863,"wires":[["d7052c60.d84a2"]]},{"id":"6f08271b.9815e8","type":"comment","z":"bcc9ccbb.41377","name":"Só armazana se houver troca do ano","info":"","x":1020,"y":760,"wires":[]},{"id":"64ded87d.4b6f28","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual104.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":720,"y":820,"wires":[[]]},{"id":"7f5c2ce9.9650c4","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":1200,"y":1040,"wires":[[]]},{"id":"ace4df6f.1f676","type":"function","z":"bcc9ccbb.41377","name":"valorParaTotalAtéAnoAnterior","func":"//retorna o valor apenas na mudança do mês\nif (typeof msg.payload[0] == \"boolean\") {\n    if (msg.payload[0] == true) {\n        msg.payload = msg.payload[1];\n        return msg;\n    }\nelse \n    if (msg.payload[1] == true) {\n    msg.payload = msg.payload[0];\n    return msg;\n    }\n}\n\n//if(isNaN(msg.payload[0])) {\n  \n","outputs":1,"noerr":0,"x":1000,"y":1083,"wires":[["7f5c2ce9.9650c4"]]},{"id":"242a6df0.01c4c2","type":"comment","z":"bcc9ccbb.41377","name":"Só armazana se houver troca do ano","info":"","x":980,"y":980,"wires":[]},{"id":"fdc510f.15736f","type":"file","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual105.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":680,"y":1040,"wires":[[]]},{"id":"286242ed.e0c05e","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":1480,"wires":[["ded16749.6b19f8"]]},{"id":"8a7d8747.1fc798","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior102.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":1520,"wires":[["eb8fa13.c59b56"]]},{"id":"b6f90b29.93dde8","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":430,"y":1680,"wires":[["98950baf.901c38"]]},{"id":"fa8e45c8.b2e118","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior103.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":440,"y":1720,"wires":[["7aeb0a8.79de9f4"]]},{"id":"9972c5aa.71e7c8","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":430,"y":1880,"wires":[["21306b8b.0e2034"]]},{"id":"cd159d5e.05442","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior104.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":440,"y":1920,"wires":[["4c0f2c05.82a044"]]},{"id":"ca4ebd3c.8950d","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAtual105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":450,"y":2060,"wires":[["4d96141.a5913ec"]]},{"id":"6dae68d6.7ce7e8","type":"file in","z":"bcc9ccbb.41377","name":"","filename":"nodeRedData/vazaoTotalGeralAteAnoAnterior105.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":460,"y":2100,"wires":[["7def5530.974eec"]]},{"id":"1473fb66.b1acc5","type":"inject","z":"a3e5e6e7.f44978","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"300","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":260,"wires":[["328e5e46.f0d9d2"]]},{"id":"46b4f1ec.d523e","type":"file","z":"a3e5e6e7.f44978","name":"","filename":"nodeRedData/valorReaisM3.dat","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"utf8","x":410,"y":120,"wires":[[]]},{"id":"572b136b.532f5c","type":"ui_numeric","z":"a3e5e6e7.f44978","name":"","label":"Reais por m3","tooltip":"","group":"7d706e5.8c6dd1","order":2,"width":0,"height":0,"passthru":true,"topic":"","format":"{{value}}","min":0,"max":"100000","step":"0.01","x":150,"y":120,"wires":[["46b4f1ec.d523e"]]},{"id":"328e5e46.f0d9d2","type":"file in","z":"a3e5e6e7.f44978","name":"","filename":"nodeRedData/valorReaisM3.dat","format":"utf8","chunk":false,"sendError":false,"encoding":"utf8","x":270,"y":200,"wires":[["572b136b.532f5c","a621d569.c8acf8"]]},{"id":"8f62dd4f.a8989","type":"join","z":"a3e5e6e7.f44978","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":710,"y":300,"wires":[["b1028715.fd50a8"]]},{"id":"a621d569.c8acf8","type":"change","z":"a3e5e6e7.f44978","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":638.5,"y":216.75,"wires":[["8f62dd4f.a8989"]]},{"id":"b1028715.fd50a8","type":"function","z":"a3e5e6e7.f44978","name":"calculo do rendimento","func":"//multiplica dois elementos do array\nmsg.payload = msg.payload[0] * msg.payload[1] / 1000\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":400,"wires":[["240e5a99.efae66","d985379d.735778"]]},{"id":"d985379d.735778","type":"function","z":"a3e5e6e7.f44978","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":400,"wires":[["43763394.f9a86c"]]},{"id":"240e5a99.efae66","type":"function","z":"a3e5e6e7.f44978","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":340,"wires":[["d16bd838.d351b8"]]},{"id":"8fc9abd0.0cd258","type":"modbus-read","z":"a3e5e6e7.f44978","name":"fit105TOTAL_VOLUME","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"218","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":160,"y":400,"wires":[["faf973c0.0db78"],[]]},{"id":"9e1ffbcc.4b2958","type":"change","z":"a3e5e6e7.f44978","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":380,"wires":[["8f62dd4f.a8989"]]},{"id":"faf973c0.0db78","type":"function","z":"a3e5e6e7.f44978","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":300,"wires":[["9e1ffbcc.4b2958"]]},{"id":"43763394.f9a86c","type":"modbus-write","z":"a3e5e6e7.f44978","name":"rendimentoTotalEnergy parte baixa 341MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"341","quantity":"1","server":"e01ff31a.ec00c8","x":1290,"y":400,"wires":[[],[]]},{"id":"d16bd838.d351b8","type":"modbus-write","z":"a3e5e6e7.f44978","name":"rendimentoTotalEnergy parte alta 340MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"340","quantity":"1","server":"e01ff31a.ec00c8","x":1251.5,"y":324.75,"wires":[[],[]]},{"id":"f5a39ef0.708a38","type":"comment","z":"157208c6.81a43f","name":"RESERVADO","info":"","x":410,"y":1220,"wires":[]},{"id":"cf595b36.b05da","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.135 energia jt307 bl B","host":"10.80.0.135","timeout":"2","requests":"1","x":351,"y":1540,"wires":[["ab312d59.137138"]]},{"id":"2c7a3111.7a0d96","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.136 energia jt308 bl B","host":"10.80.0.136","timeout":"2","requests":"1","x":360,"y":1580,"wires":[["a2e6b119.b4507"]]},{"id":"e1051375.184728","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.137 energia jt309 bl B","host":"10.80.0.137","timeout":"2","requests":"1","x":360,"y":1620,"wires":[["a2d35906.4062f8"]]},{"id":"de30684f.1edc9","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.138 energia jt318 estufa","host":"10.80.0.138","timeout":"2","requests":"1","x":350,"y":1660,"wires":[["cd4e3ff5.0342d"]]},{"id":"de81c77d.15d3c","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.139 energia jt319 estufa","host":"10.80.0.139","timeout":"2","requests":"1","x":350,"y":1700,"wires":[["9e2570df.1f9bb8"]]},{"id":"d79117e9.feea18","type":"conf ping","z":"157208c6.81a43f","name":"10.80.0.140 energia jt320 estufa","host":"10.80.0.140","timeout":"2","requests":"1","x":345.75,"y":1736.75,"wires":[["cb42f3a5.5508e"]]},{"id":"3ef90369.513c2c","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC bloco A","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":120,"wires":[["2d9d4e12.d5417a"],[]]},{"id":"9b1514cb.36f348","type":"debug","z":"f544a59b.bd6c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1020,"y":140,"wires":[]},{"id":"2d9d4e12.d5417a","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":120,"wires":[["b97fd289.0f7ec8"]]},{"id":"ef6d5866.980698","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC bloco B","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"110","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":180,"wires":[["5c01a0e7.bb4e18"],[]]},{"id":"b97fd289.0f7ec8","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":120,"wires":[["44db63a1.16c584"]]},{"id":"1723deb8.b2a2f1","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC bloco C","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"120","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":240,"wires":[["f0155c15.f0f6b"],[]]},{"id":"1a770f1f.f63d09","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ÁREA EXTERNA OFICINA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"130","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":150,"y":300,"wires":[["447e28c8.4ff5c"],[]]},{"id":"ae55ada9.8d0148","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC GUARITA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"140","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":180,"y":360,"wires":[["8a719f43.256708"],[]]},{"id":"22e5d78f.d5e1","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ESTUFA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":420,"wires":[["806d3496.a1d8f8"],[]]},{"id":"5c01a0e7.bb4e18","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":180,"wires":[["be46de1b.9c69d"]]},{"id":"be46de1b.9c69d","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":180,"wires":[["44db63a1.16c584"]]},{"id":"f0155c15.f0f6b","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":240,"wires":[["3fed1b73.1f09c4"]]},{"id":"3fed1b73.1f09c4","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":240,"wires":[["44db63a1.16c584"]]},{"id":"447e28c8.4ff5c","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":300,"wires":[["bcf473ba.e8dc28"]]},{"id":"bcf473ba.e8dc28","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":300,"wires":[["44db63a1.16c584"]]},{"id":"8a719f43.256708","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":360,"wires":[["b0b32194.26d2b"]]},{"id":"b0b32194.26d2b","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":360,"wires":[["44db63a1.16c584"]]},{"id":"806d3496.a1d8f8","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":420,"wires":[["1bf7d0c.2a78f2f"]]},{"id":"1bf7d0c.2a78f2f","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":420,"wires":[[]]},{"id":"50852edd.655128","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte alta 150MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"150","quantity":"1","server":"3af853c.716cb2c","x":1290,"y":240,"wires":[[],[]]},{"id":"cb6732b2.ace888","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte baixa 151MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"151","quantity":"1","server":"3af853c.716cb2c","x":1300,"y":300,"wires":[[],[]]},{"id":"fc2549a7.f9452","type":"function","z":"f544a59b.bd6c18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":240,"wires":[["50852edd.655128"]]},{"id":"d9ff236e.6cf458","type":"function","z":"f544a59b.bd6c18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1120,"y":300,"wires":[["cb6732b2.ace888"]]},{"id":"44db63a1.16c584","type":"join","z":"f544a59b.bd6c18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":860,"y":260,"wires":[["1fca1475.de6384"]]},{"id":"1fca1475.de6384","type":"change","z":"f544a59b.bd6c18","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":300,"wires":[["fc2549a7.f9452","d9ff236e.6cf458"]]},{"id":"908aa94.3610fd8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco A","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"108","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":520,"wires":[["31288b3e.052a14"],[]]},{"id":"a8408d76.d43858","type":"debug","z":"f544a59b.bd6c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1060,"y":540,"wires":[]},{"id":"31288b3e.052a14","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":520,"wires":[["79310de0.db915c"]]},{"id":"4a31d254.95487c","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco B","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"118","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":580,"wires":[["ca3894ea.d6c5e8"],[]]},{"id":"79310de0.db915c","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":520,"wires":[["febdf0a3.dff128"]]},{"id":"58cd8017.1233e","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco C","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"128","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":640,"wires":[["db674e54.1cd308"],[]]},{"id":"8d1b2a7b.766f3","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total ÁREA EXTERNA OFICINA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"138","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":200,"y":700,"wires":[["a6d60d65.8ad88"],[]]},{"id":"48f521ad.8523f8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total GUARITA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"148","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":760,"wires":[["9831f8bb.e39d88"],[]]},{"id":"fb280ba3.bfe9b8","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ESTUFA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":820,"wires":[["ad5373e5.db5ee"],[]]},{"id":"ca3894ea.d6c5e8","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":580,"wires":[["2e628350.3a4f8c"]]},{"id":"2e628350.3a4f8c","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":580,"wires":[["febdf0a3.dff128"]]},{"id":"db674e54.1cd308","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":640,"wires":[["370c50c6.d3f5c"]]},{"id":"370c50c6.d3f5c","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":640,"wires":[["febdf0a3.dff128"]]},{"id":"a6d60d65.8ad88","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":700,"wires":[["11241fbe.752348"]]},{"id":"11241fbe.752348","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":700,"wires":[["febdf0a3.dff128"]]},{"id":"9831f8bb.e39d88","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":760,"wires":[["e6ebb9bb.7922d8"]]},{"id":"e6ebb9bb.7922d8","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":760,"wires":[["febdf0a3.dff128"]]},{"id":"ad5373e5.db5ee","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":820,"wires":[["256af50c.899912"]]},{"id":"256af50c.899912","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":820,"wires":[[]]},{"id":"f2dbdec2.9b034","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte alta 152MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"152","quantity":"1","server":"3af853c.716cb2c","x":1330,"y":640,"wires":[[],[]]},{"id":"4055692d.350558","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte baixa 153MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"153","quantity":"1","server":"3af853c.716cb2c","x":1340,"y":700,"wires":[[],[]]},{"id":"ea46abab.a3323","type":"function","z":"f544a59b.bd6c18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":640,"wires":[["f2dbdec2.9b034"]]},{"id":"1355f03a.ed6938","type":"function","z":"f544a59b.bd6c18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":700,"wires":[["4055692d.350558"]]},{"id":"febdf0a3.dff128","type":"join","z":"f544a59b.bd6c18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":660,"wires":[["cc9fc7d3.2a84"]]},{"id":"cc9fc7d3.2a84","type":"change","z":"f544a59b.bd6c18","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":700,"wires":[["ea46abab.a3323","1355f03a.ed6938"]]},{"id":"a61c84ba.977dc8","type":"comment","z":"f544a59b.bd6c18","name":"total consumo instantâneo","info":"","x":540,"y":60,"wires":[]},{"id":"41266a1a.a93874","type":"comment","z":"f544a59b.bd6c18","name":"total consumo totalizado geral","info":"","x":530,"y":460,"wires":[]},{"id":"1d924260.03c15e","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco A","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"102","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":940,"wires":[["4f273b9c.13464c"],[]]},{"id":"3b9b2727.25439","type":"debug","z":"f544a59b.bd6c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1060,"y":960,"wires":[]},{"id":"4f273b9c.13464c","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":940,"wires":[["1eae0554.a65153"]]},{"id":"bd6d3738.551bd","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco B","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"112","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":1000,"wires":[["490a4979.605748"],[]]},{"id":"1eae0554.a65153","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":940,"wires":[["ae538d62.3137d8"]]},{"id":"c340a2ed.d2fb48","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco C","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"122","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":190,"y":1060,"wires":[["d1c4f314.e2db38"],[]]},{"id":"4a49d353.8496a4","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total ÁREA EXTERNA OFICINA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"132","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":200,"y":1120,"wires":[["2f7c72ae.ebea96"],[]]},{"id":"eb08838b.9d84f8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total GUARITA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"142","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":1180,"wires":[["bd1a8447.7934b8"],[]]},{"id":"f9321390.10d028","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ESTUFA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":1240,"wires":[["2efe5a7a.68f84e"],[]]},{"id":"490a4979.605748","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1000,"wires":[["d7d7a488.72bf08"]]},{"id":"d7d7a488.72bf08","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1000,"wires":[["ae538d62.3137d8"]]},{"id":"d1c4f314.e2db38","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1060,"wires":[["b731416f.ef8628"]]},{"id":"b731416f.ef8628","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1060,"wires":[["ae538d62.3137d8"]]},{"id":"2f7c72ae.ebea96","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1120,"wires":[["42046a0c.8071d4"]]},{"id":"42046a0c.8071d4","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1120,"wires":[["ae538d62.3137d8"]]},{"id":"bd1a8447.7934b8","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1180,"wires":[["688059e.4e7b628"]]},{"id":"688059e.4e7b628","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1180,"wires":[["ae538d62.3137d8"]]},{"id":"2efe5a7a.68f84e","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1240,"wires":[["f51b26fa.b4177"]]},{"id":"f51b26fa.b4177","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1240,"wires":[[]]},{"id":"756365fa.ff2624","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte alta 154MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"154","quantity":"1","server":"3af853c.716cb2c","x":1330,"y":1060,"wires":[[],[]]},{"id":"ece0b76b.8fdc48","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte baixa 155MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"155","quantity":"1","server":"3af853c.716cb2c","x":1340,"y":1120,"wires":[[],[]]},{"id":"7490d2d8.0f0c2c","type":"function","z":"f544a59b.bd6c18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1150,"y":1060,"wires":[["756365fa.ff2624"]]},{"id":"b0618967.45bc2","type":"function","z":"f544a59b.bd6c18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":1120,"wires":[["ece0b76b.8fdc48"]]},{"id":"ae538d62.3137d8","type":"join","z":"f544a59b.bd6c18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":1080,"wires":[["c910fd20.838948"]]},{"id":"c910fd20.838948","type":"change","z":"f544a59b.bd6c18","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":1120,"wires":[["7490d2d8.0f0c2c","b0618967.45bc2"]]},{"id":"cf2aa869.94c62","type":"comment","z":"f544a59b.bd6c18","name":"total consumo totalizado dia","info":"","x":540,"y":880,"wires":[]},{"id":"85520482.8e28a8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco A","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"104","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":190,"y":1360,"wires":[["9b8599c6.5404a8"],[]]},{"id":"e208518e.80dc48","type":"debug","z":"f544a59b.bd6c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1040,"y":1380,"wires":[]},{"id":"9b8599c6.5404a8","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1360,"wires":[["6dfe117f.3e6f5"]]},{"id":"f015efaf.dc1608","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco B","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"114","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":190,"y":1420,"wires":[["e72a7269.334fd"],[]]},{"id":"6dfe117f.3e6f5","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1360,"wires":[["5966de3f.f33b08"]]},{"id":"a5f81db1.b7ecf","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco C","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"124","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":170,"y":1480,"wires":[["579c0b65.2db4a4"],[]]},{"id":"7714c2c7.e242dc","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total ÁREA EXTERNA OFICINA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"134","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":180,"y":1540,"wires":[["48fa5174.2619c"],[]]},{"id":"a72ec3e8.28d48","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total GUARITA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"144","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":200,"y":1600,"wires":[["6190c701.05e2a"],[]]},{"id":"1c68283d.14f5a","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ESTUFA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":190,"y":1660,"wires":[["68005ba3.a82474"],[]]},{"id":"e72a7269.334fd","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1420,"wires":[["f0a69232.21254"]]},{"id":"f0a69232.21254","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":1420,"wires":[["5966de3f.f33b08"]]},{"id":"579c0b65.2db4a4","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1480,"wires":[["ceedee3c.cd7b8"]]},{"id":"ceedee3c.cd7b8","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":1480,"wires":[["5966de3f.f33b08"]]},{"id":"48fa5174.2619c","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1540,"wires":[["6170e775.768b28"]]},{"id":"6170e775.768b28","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1540,"wires":[["5966de3f.f33b08"]]},{"id":"6190c701.05e2a","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1600,"wires":[["47f0009e.dc043"]]},{"id":"47f0009e.dc043","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1600,"wires":[["5966de3f.f33b08"]]},{"id":"68005ba3.a82474","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":1660,"wires":[["8e95206c.5e30a8"]]},{"id":"8e95206c.5e30a8","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":1660,"wires":[[]]},{"id":"34e027f1.c07c7","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte alta 156MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"156","quantity":"1","server":"3af853c.716cb2c","x":1310,"y":1480,"wires":[[],[]]},{"id":"f2cba7a7.2ba9b","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte baixa 157MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"157","quantity":"1","server":"3af853c.716cb2c","x":1320,"y":1540,"wires":[[],[]]},{"id":"b45d266f.52f13","type":"function","z":"f544a59b.bd6c18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1130,"y":1480,"wires":[["34e027f1.c07c7"]]},{"id":"d43808a6.a0d71","type":"function","z":"f544a59b.bd6c18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1540,"wires":[["f2cba7a7.2ba9b"]]},{"id":"5966de3f.f33b08","type":"join","z":"f544a59b.bd6c18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":880,"y":1500,"wires":[["b289d206.7f19e8"]]},{"id":"b289d206.7f19e8","type":"change","z":"f544a59b.bd6c18","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":1540,"wires":[["b45d266f.52f13","d43808a6.a0d71"]]},{"id":"b98fb7a5.f4437","type":"comment","z":"f544a59b.bd6c18","name":"total consumo totalizado mês","info":"","x":520,"y":1300,"wires":[]},{"id":"dc98c1a1.5a5578","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco A","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"106","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":1780,"wires":[["6485fef4.750c5"],[]]},{"id":"9104c5b5.e089e","type":"debug","z":"f544a59b.bd6c18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1080,"y":1800,"wires":[]},{"id":"6485fef4.750c5","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1780,"wires":[["6f71440.cedf13c"]]},{"id":"ef0b1837.1631b8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco B","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"116","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":1840,"wires":[["d611b105.77744"],[]]},{"id":"6f71440.cedf13c","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1780,"wires":[["2e423a60.88f3f6"]]},{"id":"f4f77bed.e5da2","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total bloco C","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"126","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":210,"y":1900,"wires":[["946e0e88.86f69"],[]]},{"id":"d323862.4c853f8","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total ÁREA EXTERNA OFICINA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"136","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":220,"y":1960,"wires":[["3d4ba67b.127452"],[]]},{"id":"21c4aa56.0c2556","type":"modbus-read","z":"f544a59b.bd6c18","name":"Total GUARITA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"146","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":240,"y":2020,"wires":[["428235b7.c8d874"],[]]},{"id":"620c9929.38dd48","type":"modbus-read","z":"f544a59b.bd6c18","name":"PAC ESTUFA","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"100","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"3af853c.716cb2c","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":230,"y":2080,"wires":[["a83825d1.9be9a"],[]]},{"id":"d611b105.77744","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1840,"wires":[["f0a30ce4.e6819"]]},{"id":"f0a30ce4.e6819","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1840,"wires":[["2e423a60.88f3f6"]]},{"id":"946e0e88.86f69","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1900,"wires":[["5d129f1.d69066"]]},{"id":"5d129f1.d69066","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":1900,"wires":[["2e423a60.88f3f6"]]},{"id":"3d4ba67b.127452","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1960,"wires":[["404c0d63.f394ec"]]},{"id":"404c0d63.f394ec","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1960,"wires":[["2e423a60.88f3f6"]]},{"id":"428235b7.c8d874","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":2020,"wires":[["ce8d13b6.39ec88"]]},{"id":"ce8d13b6.39ec88","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"5","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2020,"wires":[["2e423a60.88f3f6"]]},{"id":"a83825d1.9be9a","type":"function","z":"f544a59b.bd6c18","name":"convert arry word to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":2080,"wires":[["c0c64fa5.dd6e4"]]},{"id":"c0c64fa5.dd6e4","type":"change","z":"f544a59b.bd6c18","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"6","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2080,"wires":[[]]},{"id":"316d0034.306d9","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte alta 158MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"158","quantity":"1","server":"3af853c.716cb2c","x":1350,"y":1900,"wires":[[],[]]},{"id":"3e24e1de.7b75b6","type":"modbus-write","z":"f544a59b.bd6c18","name":"parte baixa 159MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"159","quantity":"1","server":"3af853c.716cb2c","x":1360,"y":1960,"wires":[[],[]]},{"id":"f4eb22c0.035a98","type":"function","z":"f544a59b.bd6c18","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":1170,"y":1900,"wires":[["316d0034.306d9"]]},{"id":"c4f8c46d.8b0298","type":"function","z":"f544a59b.bd6c18","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1180,"y":1960,"wires":[["3e24e1de.7b75b6"]]},{"id":"2e423a60.88f3f6","type":"join","z":"f544a59b.bd6c18","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":920,"y":1920,"wires":[["92dc199e.e1e1c8"]]},{"id":"92dc199e.e1e1c8","type":"change","z":"f544a59b.bd6c18","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1960,"wires":[["f4eb22c0.035a98","c4f8c46d.8b0298"]]},{"id":"952ec6dd.e274b8","type":"comment","z":"f544a59b.bd6c18","name":"total consumo totalizado ano","info":"","x":560,"y":1720,"wires":[]},{"id":"f65d763b.debae8","type":"debug","z":"9c48a530.854d18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":410,"y":40,"wires":[]},{"id":"5848fdfe.1070f4","type":"modbus-read","z":"f94531da.85b0b","name":"FIT101 total dia","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"220","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":130,"y":80,"wires":[["584bba5c.a7c54c"],[]]},{"id":"584bba5c.a7c54c","type":"function","z":"f94531da.85b0b","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":403,"y":75,"wires":[["fa0055e.7d617a8"]]},{"id":"fdea8733.7a1ea","type":"modbus-read","z":"f94531da.85b0b","name":"FIT102 total dia","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"230","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":132.5,"y":149,"wires":[["dd8f1aa5.08a19"],[]]},{"id":"76f726e9.7f325","type":"modbus-read","z":"f94531da.85b0b","name":"FIT103 total dia","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"240","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":129.5,"y":212,"wires":[["1b1c81e.5f5a4fe"],[]]},{"id":"ec70c9df.ed2418","type":"modbus-read","z":"f94531da.85b0b","name":"FIT104 total dia","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"250","quantity":"2","rate":"5","rateUnit":"m","delayOnStart":false,"startDelayTime":"","server":"e01ff31a.ec00c8","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":132.5,"y":269,"wires":[["d44a3c7e.bb21b8"],[]]},{"id":"dd8f1aa5.08a19","type":"function","z":"f94531da.85b0b","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":405.5,"y":151,"wires":[["875e06dd.6d6398"]]},{"id":"1b1c81e.5f5a4fe","type":"function","z":"f94531da.85b0b","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":403.5,"y":206,"wires":[["11418961.9e3717"]]},{"id":"d44a3c7e.bb21b8","type":"function","z":"f94531da.85b0b","name":"Convert array byte to int32","func":"// Create new Buffer based on array bytes\nconst buf = Buffer.from(msg.responseBuffer.buffer);\n\n// Represent these bytes as 32-bit unsigned int\nconst value = buf.readUInt32BE();\n\n// save the value\nmsg.payload = value;\n\nreturn msg;","outputs":1,"noerr":0,"x":392.5,"y":265,"wires":[["875067df.993b5"]]},{"id":"a4c02c49.2b18e","type":"join","z":"f94531da.85b0b","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":808.25,"y":176.75,"wires":[["29090641.29318a"]]},{"id":"fa0055e.7d617a8","type":"change","z":"f94531da.85b0b","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":624.25,"y":74.75,"wires":[["a4c02c49.2b18e"]]},{"id":"875e06dd.6d6398","type":"change","z":"f94531da.85b0b","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":619.25,"y":143.75,"wires":[["a4c02c49.2b18e"]]},{"id":"29090641.29318a","type":"change","z":"f94531da.85b0b","name":"$sum(payload)","rules":[{"t":"set","p":"payload","pt":"msg","to":"$sum(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":865.25,"y":248.75,"wires":[["792913f7.e1ab5c","440168ac.b646f"]]},{"id":"11418961.9e3717","type":"change","z":"f94531da.85b0b","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":618.25,"y":202.75,"wires":[["a4c02c49.2b18e"]]},{"id":"875067df.993b5","type":"change","z":"f94531da.85b0b","name":"","rules":[{"t":"set","p":"parts","pt":"msg","to":"4","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":618.25,"y":263.75,"wires":[["a4c02c49.2b18e"]]},{"id":"c6ccb7e4.00a65","type":"modbus-write","z":"f94531da.85b0b","name":"parte alta total dia 270MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"270","quantity":"1","server":"e01ff31a.ec00c8","x":1196.75,"y":61,"wires":[[],[]]},{"id":"4fac07eb.35ea7","type":"modbus-write","z":"f94531da.85b0b","name":"parte baixa total dia 271 MB","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"271","quantity":"1","server":"e01ff31a.ec00c8","x":1237.5,"y":127,"wires":[[],[]]},{"id":"792913f7.e1ab5c","type":"function","z":"f94531da.85b0b","name":"parte alta","func":"msg.payload = msg.payload >> 16 ;\nreturn msg;","outputs":1,"noerr":0,"x":975.75,"y":59.25,"wires":[["c6ccb7e4.00a65"]]},{"id":"440168ac.b646f","type":"function","z":"f94531da.85b0b","name":"parte baixa","func":"msg.payload = msg.payload & 0xFFFF ;\nreturn msg;","outputs":1,"noerr":0,"x":1013.5,"y":112.75,"wires":[["4fac07eb.35ea7"]]},{"id":"9ff6e0e5.5a904","type":"debug","z":"b78441eb.815e5","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1300,"y":2540,"wires":[]}]